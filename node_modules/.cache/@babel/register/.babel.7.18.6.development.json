{"{\"assumptions\":{},\"sourceRoot\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server\",\"filename\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.6:development":{"value":{"code":"\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _ejs = _interopRequireDefault(require(\"ejs\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _helmet = _interopRequireDefault(require(\"helmet\"));\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\n\nvar _UserRouter = _interopRequireDefault(require(\"./router/TodoRouter/UserRouter\"));\n\nvar _PostRouter = _interopRequireDefault(require(\"./router/TodoRouter/PostRouter\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nrequire(\"dotenv\").config(); //connect mongoDB\n\n\nconst connectDB = async () => {\n  try {\n    await _mongoose.default.connect(`mongodb+srv://${process.env.USERNAME_DB}:${process.env.PASSWORD_DB}@batch21nodejsfull.zo5czfu.mongodb.net/?retryWrites=true&w=majority`, {\n      useCreateIndex: true,\n      useNewUrlParser: true,\n      useUnifiedTopology: true,\n      useFindAndModify: false\n    }); //     await mongoose.connect(process.env.LINK_DB, {\n    //       useNewUrlParser: true,\n    //       useUnifiedTopology: true,\n    //       useFindAndModify: false,\n    //       useCreateIndex: true,\n    //     });\n\n    console.log(\"connecting mongoDB\");\n  } catch (error) {\n    console.log(error.message);\n  }\n};\n\nconnectDB();\nconst app = (0, _express.default)(); //Dung bodyParser de dich du lieu Json va Urlencoded tra ve req duoi dang JS\n// cai nay goi la thu vien build-in middleware - check req dang json vaf urlencoded moi cho qua\n\napp.use(_bodyParser.default.json());\napp.use(_bodyParser.default.urlencoded({\n  extended: true\n}));\napp.use(_express.default.static(\"public\")); // cho phep luu ca file anh va file gi do de moc ra su dung tren UI\n\napp.use((0, _helmet.default)()); //build-in middleware (15 middleware bao mat server)\n\napp.use((0, _cors.default)()); //server-side rendering\n\napp.set(\"view engine\", \"ejs\");\napp.set(\"views\", \"./src/views\"); // app.get(\"/\", (req, res) => {\n//   res.render(\"home\");\n// });\n//Goi API ngan gon\n\n(0, _UserRouter.default)(app);\n(0, _PostRouter.default)(app); //Cau hinh PORT cho APP\n\napp.listen(process.env.PORT || 8080, () => {\n  console.log(`App running on local PORT:${process.env.PORT}`);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiY29ubmVjdERCIiwibW9uZ29vc2UiLCJjb25uZWN0IiwicHJvY2VzcyIsImVudiIsIlVTRVJOQU1FX0RCIiwiUEFTU1dPUkRfREIiLCJ1c2VDcmVhdGVJbmRleCIsInVzZU5ld1VybFBhcnNlciIsInVzZVVuaWZpZWRUb3BvbG9neSIsInVzZUZpbmRBbmRNb2RpZnkiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJtZXNzYWdlIiwiYXBwIiwiZXhwcmVzcyIsInVzZSIsImJvZHlQYXJzZXIiLCJqc29uIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwic3RhdGljIiwiaGVsbWV0IiwiY29ycyIsInNldCIsIlVzZXJzUm91dGVyIiwiUG9zdFJvdXRlciIsImxpc3RlbiIsIlBPUlQiXSwic291cmNlUm9vdCI6Ii9ob21lL2JpbmhodW5lcC9EZXNrdG9wL3NvZnRlY2gvYmF0Y2gyMV9Ob2RlanMvc2VydmVyL3NyYy8iLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgZWpzIGZyb20gXCJlanNcIjtcbmltcG9ydCBjb3JzIGZyb20gXCJjb3JzXCI7XG5pbXBvcnQgaGVsbWV0IGZyb20gXCJoZWxtZXRcIjtcblxuaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xuXG5pbXBvcnQgYm9keVBhcnNlciBmcm9tIFwiYm9keS1wYXJzZXJcIjtcblxuaW1wb3J0IFVzZXJzUm91dGVyIGZyb20gXCIuL3JvdXRlci9Ub2RvUm91dGVyL1VzZXJSb3V0ZXJcIjtcbmltcG9ydCBQb3N0Um91dGVyIGZyb20gXCIuL3JvdXRlci9Ub2RvUm91dGVyL1Bvc3RSb3V0ZXJcIjtcblxucmVxdWlyZShcImRvdGVudlwiKS5jb25maWcoKTtcblxuLy9jb25uZWN0IG1vbmdvREJcbmNvbnN0IGNvbm5lY3REQiA9IGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBtb25nb29zZS5jb25uZWN0KFxuICAgICAgYG1vbmdvZGIrc3J2Oi8vJHtwcm9jZXNzLmVudi5VU0VSTkFNRV9EQn06JHtwcm9jZXNzLmVudi5QQVNTV09SRF9EQn1AYmF0Y2gyMW5vZGVqc2Z1bGwuem81Y3pmdS5tb25nb2RiLm5ldC8/cmV0cnlXcml0ZXM9dHJ1ZSZ3PW1ham9yaXR5YCxcbiAgICAgIHtcbiAgICAgICAgdXNlQ3JlYXRlSW5kZXg6IHRydWUsXG4gICAgICAgIHVzZU5ld1VybFBhcnNlcjogdHJ1ZSxcbiAgICAgICAgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlLFxuICAgICAgICB1c2VGaW5kQW5kTW9kaWZ5OiBmYWxzZSxcbiAgICAgIH1cbiAgICApO1xuXG4gICAgLy8gICAgIGF3YWl0IG1vbmdvb3NlLmNvbm5lY3QocHJvY2Vzcy5lbnYuTElOS19EQiwge1xuICAgIC8vICAgICAgIHVzZU5ld1VybFBhcnNlcjogdHJ1ZSxcbiAgICAvLyAgICAgICB1c2VVbmlmaWVkVG9wb2xvZ3k6IHRydWUsXG4gICAgLy8gICAgICAgdXNlRmluZEFuZE1vZGlmeTogZmFsc2UsXG4gICAgLy8gICAgICAgdXNlQ3JlYXRlSW5kZXg6IHRydWUsXG4gICAgLy8gICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKFwiY29ubmVjdGluZyBtb25nb0RCXCIpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpO1xuICB9XG59O1xuXG5jb25uZWN0REIoKTtcblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuXG4vL0R1bmcgYm9keVBhcnNlciBkZSBkaWNoIGR1IGxpZXUgSnNvbiB2YSBVcmxlbmNvZGVkIHRyYSB2ZSByZXEgZHVvaSBkYW5nIEpTXG4vLyBjYWkgbmF5IGdvaSBsYSB0aHUgdmllbiBidWlsZC1pbiBtaWRkbGV3YXJlIC0gY2hlY2sgcmVxIGRhbmcganNvbiB2YWYgdXJsZW5jb2RlZCBtb2kgY2hvIHF1YVxuYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XG5hcHAudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlIH0pKTtcbmFwcC51c2UoZXhwcmVzcy5zdGF0aWMoXCJwdWJsaWNcIikpOyAvLyBjaG8gcGhlcCBsdXUgY2EgZmlsZSBhbmggdmEgZmlsZSBnaSBkbyBkZSBtb2MgcmEgc3UgZHVuZyB0cmVuIFVJXG5hcHAudXNlKGhlbG1ldCgpKTsgLy9idWlsZC1pbiBtaWRkbGV3YXJlICgxNSBtaWRkbGV3YXJlIGJhbyBtYXQgc2VydmVyKVxuYXBwLnVzZShjb3JzKCkpO1xuXG4vL3NlcnZlci1zaWRlIHJlbmRlcmluZ1xuXG5hcHAuc2V0KFwidmlldyBlbmdpbmVcIiwgXCJlanNcIik7XG5hcHAuc2V0KFwidmlld3NcIiwgXCIuL3NyYy92aWV3c1wiKTtcbi8vIGFwcC5nZXQoXCIvXCIsIChyZXEsIHJlcykgPT4ge1xuLy8gICByZXMucmVuZGVyKFwiaG9tZVwiKTtcbi8vIH0pO1xuXG4vL0dvaSBBUEkgbmdhbiBnb25cblxuVXNlcnNSb3V0ZXIoYXBwKTtcblBvc3RSb3V0ZXIoYXBwKTtcblxuLy9DYXUgaGluaCBQT1JUIGNobyBBUFBcbmFwcC5saXN0ZW4ocHJvY2Vzcy5lbnYuUE9SVCB8fCA4MDgwLCAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKGBBcHAgcnVubmluZyBvbiBsb2NhbCBQT1JUOiR7cHJvY2Vzcy5lbnYuUE9SVH1gKTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUNBOzs7O0FBRUFBLE9BQU8sQ0FBQyxRQUFELENBQVAsQ0FBa0JDLE1BQWxCLEcsQ0FFQTs7O0FBQ0EsTUFBTUMsU0FBUyxHQUFHLFlBQVk7RUFDNUIsSUFBSTtJQUNGLE1BQU1DLGlCQUFBLENBQVNDLE9BQVQsQ0FDSCxpQkFBZ0JDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxXQUFZLElBQUdGLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRSxXQUFZLHFFQURoRSxFQUVKO01BQ0VDLGNBQWMsRUFBRSxJQURsQjtNQUVFQyxlQUFlLEVBQUUsSUFGbkI7TUFHRUMsa0JBQWtCLEVBQUUsSUFIdEI7TUFJRUMsZ0JBQWdCLEVBQUU7SUFKcEIsQ0FGSSxDQUFOLENBREUsQ0FXRjtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7O0lBQ0FDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLG9CQUFaO0VBQ0QsQ0FsQkQsQ0FrQkUsT0FBT0MsS0FBUCxFQUFjO0lBQ2RGLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxLQUFLLENBQUNDLE9BQWxCO0VBQ0Q7QUFDRixDQXRCRDs7QUF3QkFkLFNBQVM7QUFFVCxNQUFNZSxHQUFHLEdBQUcsSUFBQUMsZ0JBQUEsR0FBWixDLENBRUE7QUFDQTs7QUFDQUQsR0FBRyxDQUFDRSxHQUFKLENBQVFDLG1CQUFBLENBQVdDLElBQVgsRUFBUjtBQUNBSixHQUFHLENBQUNFLEdBQUosQ0FBUUMsbUJBQUEsQ0FBV0UsVUFBWCxDQUFzQjtFQUFFQyxRQUFRLEVBQUU7QUFBWixDQUF0QixDQUFSO0FBQ0FOLEdBQUcsQ0FBQ0UsR0FBSixDQUFRRCxnQkFBQSxDQUFRTSxNQUFSLENBQWUsUUFBZixDQUFSLEUsQ0FBbUM7O0FBQ25DUCxHQUFHLENBQUNFLEdBQUosQ0FBUSxJQUFBTSxlQUFBLEdBQVIsRSxDQUFtQjs7QUFDbkJSLEdBQUcsQ0FBQ0UsR0FBSixDQUFRLElBQUFPLGFBQUEsR0FBUixFLENBRUE7O0FBRUFULEdBQUcsQ0FBQ1UsR0FBSixDQUFRLGFBQVIsRUFBdUIsS0FBdkI7QUFDQVYsR0FBRyxDQUFDVSxHQUFKLENBQVEsT0FBUixFQUFpQixhQUFqQixFLENBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUEsSUFBQUMsbUJBQUEsRUFBWVgsR0FBWjtBQUNBLElBQUFZLG1CQUFBLEVBQVdaLEdBQVgsRSxDQUVBOztBQUNBQSxHQUFHLENBQUNhLE1BQUosQ0FBV3pCLE9BQU8sQ0FBQ0MsR0FBUixDQUFZeUIsSUFBWixJQUFvQixJQUEvQixFQUFxQyxNQUFNO0VBQ3pDbEIsT0FBTyxDQUFDQyxHQUFSLENBQWEsNkJBQTRCVCxPQUFPLENBQUNDLEdBQVIsQ0FBWXlCLElBQUssRUFBMUQ7QUFDRCxDQUZEIn0=","map":{"version":3,"names":["require","config","connectDB","mongoose","connect","process","env","USERNAME_DB","PASSWORD_DB","useCreateIndex","useNewUrlParser","useUnifiedTopology","useFindAndModify","console","log","error","message","app","express","use","bodyParser","json","urlencoded","extended","static","helmet","cors","set","UsersRouter","PostRouter","listen","PORT"],"sourceRoot":"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/","sources":["index.js"],"sourcesContent":["import express from \"express\";\nimport ejs from \"ejs\";\nimport cors from \"cors\";\nimport helmet from \"helmet\";\n\nimport mongoose from \"mongoose\";\n\nimport bodyParser from \"body-parser\";\n\nimport UsersRouter from \"./router/TodoRouter/UserRouter\";\nimport PostRouter from \"./router/TodoRouter/PostRouter\";\n\nrequire(\"dotenv\").config();\n\n//connect mongoDB\nconst connectDB = async () => {\n  try {\n    await mongoose.connect(\n      `mongodb+srv://${process.env.USERNAME_DB}:${process.env.PASSWORD_DB}@batch21nodejsfull.zo5czfu.mongodb.net/?retryWrites=true&w=majority`,\n      {\n        useCreateIndex: true,\n        useNewUrlParser: true,\n        useUnifiedTopology: true,\n        useFindAndModify: false,\n      }\n    );\n\n    //     await mongoose.connect(process.env.LINK_DB, {\n    //       useNewUrlParser: true,\n    //       useUnifiedTopology: true,\n    //       useFindAndModify: false,\n    //       useCreateIndex: true,\n    //     });\n    console.log(\"connecting mongoDB\");\n  } catch (error) {\n    console.log(error.message);\n  }\n};\n\nconnectDB();\n\nconst app = express();\n\n//Dung bodyParser de dich du lieu Json va Urlencoded tra ve req duoi dang JS\n// cai nay goi la thu vien build-in middleware - check req dang json vaf urlencoded moi cho qua\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: true }));\napp.use(express.static(\"public\")); // cho phep luu ca file anh va file gi do de moc ra su dung tren UI\napp.use(helmet()); //build-in middleware (15 middleware bao mat server)\napp.use(cors());\n\n//server-side rendering\n\napp.set(\"view engine\", \"ejs\");\napp.set(\"views\", \"./src/views\");\n// app.get(\"/\", (req, res) => {\n//   res.render(\"home\");\n// });\n\n//Goi API ngan gon\n\nUsersRouter(app);\nPostRouter(app);\n\n//Cau hinh PORT cho APP\napp.listen(process.env.PORT || 8080, () => {\n  console.log(`App running on local PORT:${process.env.PORT}`);\n});\n"],"mappings":";;AAAA;;AACA;;AACA;;AACA;;AAEA;;AAEA;;AAEA;;AACA;;;;AAEAA,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB,G,CAEA;;;AACA,MAAMC,SAAS,GAAG,YAAY;EAC5B,IAAI;IACF,MAAMC,iBAAA,CAASC,OAAT,CACH,iBAAgBC,OAAO,CAACC,GAAR,CAAYC,WAAY,IAAGF,OAAO,CAACC,GAAR,CAAYE,WAAY,qEADhE,EAEJ;MACEC,cAAc,EAAE,IADlB;MAEEC,eAAe,EAAE,IAFnB;MAGEC,kBAAkB,EAAE,IAHtB;MAIEC,gBAAgB,EAAE;IAJpB,CAFI,CAAN,CADE,CAWF;IACA;IACA;IACA;IACA;IACA;;IACAC,OAAO,CAACC,GAAR,CAAY,oBAAZ;EACD,CAlBD,CAkBE,OAAOC,KAAP,EAAc;IACdF,OAAO,CAACC,GAAR,CAAYC,KAAK,CAACC,OAAlB;EACD;AACF,CAtBD;;AAwBAd,SAAS;AAET,MAAMe,GAAG,GAAG,IAAAC,gBAAA,GAAZ,C,CAEA;AACA;;AACAD,GAAG,CAACE,GAAJ,CAAQC,mBAAA,CAAWC,IAAX,EAAR;AACAJ,GAAG,CAACE,GAAJ,CAAQC,mBAAA,CAAWE,UAAX,CAAsB;EAAEC,QAAQ,EAAE;AAAZ,CAAtB,CAAR;AACAN,GAAG,CAACE,GAAJ,CAAQD,gBAAA,CAAQM,MAAR,CAAe,QAAf,CAAR,E,CAAmC;;AACnCP,GAAG,CAACE,GAAJ,CAAQ,IAAAM,eAAA,GAAR,E,CAAmB;;AACnBR,GAAG,CAACE,GAAJ,CAAQ,IAAAO,aAAA,GAAR,E,CAEA;;AAEAT,GAAG,CAACU,GAAJ,CAAQ,aAAR,EAAuB,KAAvB;AACAV,GAAG,CAACU,GAAJ,CAAQ,OAAR,EAAiB,aAAjB,E,CACA;AACA;AACA;AAEA;;AAEA,IAAAC,mBAAA,EAAYX,GAAZ;AACA,IAAAY,mBAAA,EAAWZ,GAAX,E,CAEA;;AACAA,GAAG,CAACa,MAAJ,CAAWzB,OAAO,CAACC,GAAR,CAAYyB,IAAZ,IAAoB,IAA/B,EAAqC,MAAM;EACzClB,OAAO,CAACC,GAAR,CAAa,6BAA4BT,OAAO,CAACC,GAAR,CAAYyB,IAAK,EAA1D;AACD,CAFD"}},"mtime":1657596837411},"{\"assumptions\":{},\"sourceRoot\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/router/TodoRouter/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server\",\"filename\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/router/TodoRouter/UserRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.6:development":{"value":{"code":"\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _UserController = _interopRequireDefault(require(\"../../controllers/TodoController/UserController\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Router = _express.default.Router();\n\nconst usersRouter = app => {\n  Router.get(\"/\", _UserController.default.getUsers);\n  Router.post(\"/register\", _UserController.default.registerUser);\n  Router.post(\"/login\", _UserController.default.checkLogin);\n  return app.use(\"/api/Todo/User\", Router);\n};\n\nmodule.exports = usersRouter;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSb3V0ZXIiLCJleHByZXNzIiwidXNlcnNSb3V0ZXIiLCJhcHAiLCJnZXQiLCJVc2VyQ29udHJvbGxlciIsImdldFVzZXJzIiwicG9zdCIsInJlZ2lzdGVyVXNlciIsImNoZWNrTG9naW4iLCJ1c2UiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9iaW5oaHVuZXAvRGVza3RvcC9zb2Z0ZWNoL2JhdGNoMjFfTm9kZWpzL3NlcnZlci9zcmMvcm91dGVyL1RvZG9Sb3V0ZXIvIiwic291cmNlcyI6WyJVc2VyUm91dGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgVXNlckNvbnRyb2xsZXIgZnJvbSBcIi4uLy4uL2NvbnRyb2xsZXJzL1RvZG9Db250cm9sbGVyL1VzZXJDb250cm9sbGVyXCI7XG5jb25zdCBSb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG5jb25zdCB1c2Vyc1JvdXRlciA9IChhcHApID0+IHtcbiAgUm91dGVyLmdldChcIi9cIiwgVXNlckNvbnRyb2xsZXIuZ2V0VXNlcnMpO1xuICBSb3V0ZXIucG9zdChcIi9yZWdpc3RlclwiLCBVc2VyQ29udHJvbGxlci5yZWdpc3RlclVzZXIpO1xuICBSb3V0ZXIucG9zdChcIi9sb2dpblwiLCBVc2VyQ29udHJvbGxlci5jaGVja0xvZ2luKTtcblxuICByZXR1cm4gYXBwLnVzZShcIi9hcGkvVG9kby9Vc2VyXCIsIFJvdXRlcik7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHVzZXJzUm91dGVyO1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOzs7O0FBQ0EsTUFBTUEsTUFBTSxHQUFHQyxnQkFBQSxDQUFRRCxNQUFSLEVBQWY7O0FBRUEsTUFBTUUsV0FBVyxHQUFJQyxHQUFELElBQVM7RUFDM0JILE1BQU0sQ0FBQ0ksR0FBUCxDQUFXLEdBQVgsRUFBZ0JDLHVCQUFBLENBQWVDLFFBQS9CO0VBQ0FOLE1BQU0sQ0FBQ08sSUFBUCxDQUFZLFdBQVosRUFBeUJGLHVCQUFBLENBQWVHLFlBQXhDO0VBQ0FSLE1BQU0sQ0FBQ08sSUFBUCxDQUFZLFFBQVosRUFBc0JGLHVCQUFBLENBQWVJLFVBQXJDO0VBRUEsT0FBT04sR0FBRyxDQUFDTyxHQUFKLENBQVEsZ0JBQVIsRUFBMEJWLE1BQTFCLENBQVA7QUFDRCxDQU5EOztBQVFBVyxNQUFNLENBQUNDLE9BQVAsR0FBaUJWLFdBQWpCIn0=","map":{"version":3,"names":["Router","express","usersRouter","app","get","UserController","getUsers","post","registerUser","checkLogin","use","module","exports"],"sourceRoot":"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/router/TodoRouter/","sources":["UserRouter.js"],"sourcesContent":["import express from \"express\";\nimport UserController from \"../../controllers/TodoController/UserController\";\nconst Router = express.Router();\n\nconst usersRouter = (app) => {\n  Router.get(\"/\", UserController.getUsers);\n  Router.post(\"/register\", UserController.registerUser);\n  Router.post(\"/login\", UserController.checkLogin);\n\n  return app.use(\"/api/Todo/User\", Router);\n};\n\nmodule.exports = usersRouter;\n"],"mappings":";;AAAA;;AACA;;;;AACA,MAAMA,MAAM,GAAGC,gBAAA,CAAQD,MAAR,EAAf;;AAEA,MAAME,WAAW,GAAIC,GAAD,IAAS;EAC3BH,MAAM,CAACI,GAAP,CAAW,GAAX,EAAgBC,uBAAA,CAAeC,QAA/B;EACAN,MAAM,CAACO,IAAP,CAAY,WAAZ,EAAyBF,uBAAA,CAAeG,YAAxC;EACAR,MAAM,CAACO,IAAP,CAAY,QAAZ,EAAsBF,uBAAA,CAAeI,UAArC;EAEA,OAAON,GAAG,CAACO,GAAJ,CAAQ,gBAAR,EAA0BV,MAA1B,CAAP;AACD,CAND;;AAQAW,MAAM,CAACC,OAAP,GAAiBV,WAAjB"}},"mtime":1656937315744},"{\"assumptions\":{},\"sourceRoot\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/controllers/TodoController/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server\",\"filename\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/controllers/TodoController/UserController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.6:development":{"value":{"code":"\"use strict\";\n\nvar _UserModel = _interopRequireDefault(require(\"../../models/TodoModel/UserModel\"));\n\nvar _UserValidation = _interopRequireDefault(require(\"../../validation/TodoValidation/UserValidation\"));\n\nvar _argon = _interopRequireDefault(require(\"argon2\"));\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _joi = require(\"joi\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//add thu vien hashpassword\n//add thu vien tao token\nrequire(\"dotenv\").config();\n\nconst getUsers = async (req, res) => {\n  try {\n    const users = await _UserModel.default.find({\n      isActive: false\n    }, (err, docs) => {\n      if (err) {\n        return res.status(400).json({\n          success: false,\n          message: err\n        });\n      }\n    }).sort({\n      first_name: -1\n    }).select({\n      first_name: 1,\n      last_name: 1\n    }) // .limit(10)\n    .skip(100);\n    console.log(users);\n    return res.status(200).json({\n      success: true,\n      message: \"Get all user!\",\n      data: users\n    });\n  } catch (error) {\n    console.log(error.message);\n    res.status(500).json({\n      success: false,\n      message: \"Internet server error!\"\n    });\n  }\n};\n\nconst registerUser = async (req, res) => {\n  const user = {\n    first_name: req.body.first_name,\n    last_name: req.body.last_name,\n    email: req.body.email,\n    gender: req.body.gender,\n    address: req.body.address,\n    university: req.body.university,\n    isActive: req.body.isActive,\n    createdAt: new Date(),\n    username: req.body.username,\n    password: req.body.password\n  };\n  console.log(user); //check missing params\n\n  if (!user.username || !user.password) {\n    return res.status(400).json({\n      success: false,\n      message: \"Missing user information!\"\n    });\n  } //validate user information\n\n\n  const {\n    error\n  } = (0, _UserValidation.default)(user);\n\n  if (error) {\n    return res.status(400).json({\n      success: false,\n      message: `${error.details[0].message}`\n    });\n  } //check user exist\n\n\n  try {\n    const currentUser = await _UserModel.default.findOne({\n      username: user.username\n    });\n\n    if (currentUser) {\n      return res.status(400).json({\n        success: false,\n        message: \"User already exist!\"\n      });\n    } //hash password\n\n\n    const hashedPassword = await _argon.default.hash(user.password);\n    let newUser = new _UserModel.default({\n      username: user.username,\n      password: hashedPassword,\n      first_name: user.first_name,\n      last_name: user.last_name,\n      email: user.email,\n      gender: user.gender,\n      address: user.address,\n      university: user.university,\n      isActive: user.isActive,\n      createdAt: user.createdAt\n    });\n    await newUser.save(); //return token\n\n    const accessToken = _jsonwebtoken.default.sign({\n      userId: newUser._id\n    }, process.env.ACCESS_TOKEN_SECRET); //success\n\n\n    return res.status(200).json({\n      success: true,\n      message: \"User created success!\",\n      data: newUser,\n      token: accessToken\n    });\n  } catch (error) {\n    console.log(error.message);\n    res.status(500).json({\n      success: false,\n      message: \"Internet server error!\"\n    });\n  }\n};\n\nconst checkLogin = async (req, res) => {\n  const user = {\n    username: req.body.username,\n    password: req.body.password\n  }; //check validation req.body\n\n  const {\n    error\n  } = (0, _UserValidation.default)(user);\n\n  if (error) {\n    return res.status(400).json({\n      success: false,\n      message: `${error.details[0].message}`\n    });\n  } //check user exist (khi goi den database phai dung try and catch de bat loi khi db sup hoac bi ngat mang)\n\n\n  try {\n    const users = await _UserModel.default.find();\n    const currentUser = users.find(u => u.username === user.username);\n\n    if (!currentUser) {\n      return res.status(400).json({\n        success: false,\n        message: \"Incorrect username or password!\"\n      });\n    } //check password exist (chu y khi dung argon2.verify thi cung da goi de goi API cua thu vien argon2 nen bat//\n    //buoc phai dung await xu ly bat dong bo //\n\n\n    const checkPassword = await _argon.default.verify(currentUser.password, user.password);\n\n    if (!checkPassword) {\n      return res.status(400).json({\n        success: false,\n        message: \"Incorrect username or password!\"\n      });\n    } //return token\n\n\n    const accessToken = _jsonwebtoken.default.sign({\n      userId: currentUser._id\n    }, process.env.ACCESS_TOKEN_SECRET); //success\n\n\n    return res.status(200).json({\n      success: true,\n      message: \"User logged in successfully!\",\n      data: user,\n      token: accessToken\n    });\n  } catch (error) {\n    console.log(error.message);\n    res.status(500).json({\n      success: false,\n      message: \"Internet server error!\"\n    });\n  }\n};\n\nmodule.exports = {\n  getUsers: getUsers,\n  registerUser: registerUser,\n  checkLogin: checkLogin\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiZ2V0VXNlcnMiLCJyZXEiLCJyZXMiLCJ1c2VycyIsIlVzZXJNb2RlbCIsImZpbmQiLCJpc0FjdGl2ZSIsImVyciIsImRvY3MiLCJzdGF0dXMiLCJqc29uIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJzb3J0IiwiZmlyc3RfbmFtZSIsInNlbGVjdCIsImxhc3RfbmFtZSIsInNraXAiLCJjb25zb2xlIiwibG9nIiwiZGF0YSIsImVycm9yIiwicmVnaXN0ZXJVc2VyIiwidXNlciIsImJvZHkiLCJlbWFpbCIsImdlbmRlciIsImFkZHJlc3MiLCJ1bml2ZXJzaXR5IiwiY3JlYXRlZEF0IiwiRGF0ZSIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJVc2VyVmFsaWRhdGlvbiIsImRldGFpbHMiLCJjdXJyZW50VXNlciIsImZpbmRPbmUiLCJoYXNoZWRQYXNzd29yZCIsImFyZ29uMiIsImhhc2giLCJuZXdVc2VyIiwic2F2ZSIsImFjY2Vzc1Rva2VuIiwiand0Iiwic2lnbiIsInVzZXJJZCIsIl9pZCIsInByb2Nlc3MiLCJlbnYiLCJBQ0NFU1NfVE9LRU5fU0VDUkVUIiwidG9rZW4iLCJjaGVja0xvZ2luIiwidSIsImNoZWNrUGFzc3dvcmQiLCJ2ZXJpZnkiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9iaW5oaHVuZXAvRGVza3RvcC9zb2Z0ZWNoL2JhdGNoMjFfTm9kZWpzL3NlcnZlci9zcmMvY29udHJvbGxlcnMvVG9kb0NvbnRyb2xsZXIvIiwic291cmNlcyI6WyJVc2VyQ29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVXNlck1vZGVsIGZyb20gXCIuLi8uLi9tb2RlbHMvVG9kb01vZGVsL1VzZXJNb2RlbFwiO1xuaW1wb3J0IFVzZXJWYWxpZGF0aW9uIGZyb20gXCIuLi8uLi92YWxpZGF0aW9uL1RvZG9WYWxpZGF0aW9uL1VzZXJWYWxpZGF0aW9uXCI7XG5pbXBvcnQgYXJnb24yIGZyb20gXCJhcmdvbjJcIjsgLy9hZGQgdGh1IHZpZW4gaGFzaHBhc3N3b3JkXG5pbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjsgLy9hZGQgdGh1IHZpZW4gdGFvIHRva2VuXG5pbXBvcnQgeyBkYXRlIH0gZnJvbSBcImpvaVwiO1xucmVxdWlyZShcImRvdGVudlwiKS5jb25maWcoKTtcblxuY29uc3QgZ2V0VXNlcnMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1c2VycyA9IGF3YWl0IFVzZXJNb2RlbC5maW5kKHsgaXNBY3RpdmU6IGZhbHNlIH0sIChlcnIsIGRvY3MpID0+IHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiBlcnIsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pXG4gICAgICAuc29ydCh7XG4gICAgICAgIGZpcnN0X25hbWU6IC0xLFxuICAgICAgfSlcbiAgICAgIC5zZWxlY3QoeyBmaXJzdF9uYW1lOiAxLCBsYXN0X25hbWU6IDEgfSlcbiAgICAgIC8vIC5saW1pdCgxMClcbiAgICAgIC5za2lwKDEwMCk7XG4gICAgY29uc29sZS5sb2codXNlcnMpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZTogXCJHZXQgYWxsIHVzZXIhXCIsXG4gICAgICBkYXRhOiB1c2VycyxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6IFwiSW50ZXJuZXQgc2VydmVyIGVycm9yIVwiLFxuICAgIH0pO1xuICB9XG59O1xuXG5jb25zdCByZWdpc3RlclVzZXIgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgdXNlciA9IHtcbiAgICBmaXJzdF9uYW1lOiByZXEuYm9keS5maXJzdF9uYW1lLFxuICAgIGxhc3RfbmFtZTogcmVxLmJvZHkubGFzdF9uYW1lLFxuICAgIGVtYWlsOiByZXEuYm9keS5lbWFpbCxcbiAgICBnZW5kZXI6IHJlcS5ib2R5LmdlbmRlcixcbiAgICBhZGRyZXNzOiByZXEuYm9keS5hZGRyZXNzLFxuICAgIHVuaXZlcnNpdHk6IHJlcS5ib2R5LnVuaXZlcnNpdHksXG4gICAgaXNBY3RpdmU6IHJlcS5ib2R5LmlzQWN0aXZlLFxuICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICB1c2VybmFtZTogcmVxLmJvZHkudXNlcm5hbWUsXG4gICAgcGFzc3dvcmQ6IHJlcS5ib2R5LnBhc3N3b3JkLFxuICB9O1xuICBjb25zb2xlLmxvZyh1c2VyKTtcbiAgLy9jaGVjayBtaXNzaW5nIHBhcmFtc1xuXG4gIGlmICghdXNlci51c2VybmFtZSB8fCAhdXNlci5wYXNzd29yZCkge1xuICAgIHJldHVybiByZXNcbiAgICAgIC5zdGF0dXMoNDAwKVxuICAgICAgLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJNaXNzaW5nIHVzZXIgaW5mb3JtYXRpb24hXCIgfSk7XG4gIH1cblxuICAvL3ZhbGlkYXRlIHVzZXIgaW5mb3JtYXRpb25cblxuICBjb25zdCB7IGVycm9yIH0gPSBVc2VyVmFsaWRhdGlvbih1c2VyKTtcbiAgaWYgKGVycm9yKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgbWVzc2FnZTogYCR7ZXJyb3IuZGV0YWlsc1swXS5tZXNzYWdlfWAsXG4gICAgfSk7XG4gIH1cblxuICAvL2NoZWNrIHVzZXIgZXhpc3RcbiAgdHJ5IHtcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IFVzZXJNb2RlbC5maW5kT25lKHsgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUgfSk7XG4gICAgaWYgKGN1cnJlbnRVc2VyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogXCJVc2VyIGFscmVhZHkgZXhpc3QhXCIsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvL2hhc2ggcGFzc3dvcmRcblxuICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYXJnb24yLmhhc2godXNlci5wYXNzd29yZCk7XG4gICAgbGV0IG5ld1VzZXIgPSBuZXcgVXNlck1vZGVsKHtcbiAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLFxuICAgICAgcGFzc3dvcmQ6IGhhc2hlZFBhc3N3b3JkLFxuICAgICAgZmlyc3RfbmFtZTogdXNlci5maXJzdF9uYW1lLFxuICAgICAgbGFzdF9uYW1lOiB1c2VyLmxhc3RfbmFtZSxcbiAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgZ2VuZGVyOiB1c2VyLmdlbmRlcixcbiAgICAgIGFkZHJlc3M6IHVzZXIuYWRkcmVzcyxcbiAgICAgIHVuaXZlcnNpdHk6IHVzZXIudW5pdmVyc2l0eSxcbiAgICAgIGlzQWN0aXZlOiB1c2VyLmlzQWN0aXZlLFxuICAgICAgY3JlYXRlZEF0OiB1c2VyLmNyZWF0ZWRBdCxcbiAgICB9KTtcbiAgICBhd2FpdCBuZXdVc2VyLnNhdmUoKTtcblxuICAgIC8vcmV0dXJuIHRva2VuXG5cbiAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGp3dC5zaWduKFxuICAgICAgeyB1c2VySWQ6IG5ld1VzZXIuX2lkIH0sXG4gICAgICBwcm9jZXNzLmVudi5BQ0NFU1NfVE9LRU5fU0VDUkVUXG4gICAgKTtcblxuICAgIC8vc3VjY2Vzc1xuXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtZXNzYWdlOiBcIlVzZXIgY3JlYXRlZCBzdWNjZXNzIVwiLFxuICAgICAgZGF0YTogbmV3VXNlcixcbiAgICAgIHRva2VuOiBhY2Nlc3NUb2tlbixcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6IFwiSW50ZXJuZXQgc2VydmVyIGVycm9yIVwiLFxuICAgIH0pO1xuICB9XG59O1xuXG5jb25zdCBjaGVja0xvZ2luID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHVzZXIgPSB7XG4gICAgdXNlcm5hbWU6IHJlcS5ib2R5LnVzZXJuYW1lLFxuICAgIHBhc3N3b3JkOiByZXEuYm9keS5wYXNzd29yZCxcbiAgfTtcbiAgLy9jaGVjayB2YWxpZGF0aW9uIHJlcS5ib2R5XG4gIGNvbnN0IHsgZXJyb3IgfSA9IFVzZXJWYWxpZGF0aW9uKHVzZXIpO1xuICBpZiAoZXJyb3IpIHtcbiAgICByZXR1cm4gcmVzXG4gICAgICAuc3RhdHVzKDQwMClcbiAgICAgIC5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IGAke2Vycm9yLmRldGFpbHNbMF0ubWVzc2FnZX1gIH0pO1xuICB9XG5cbiAgLy9jaGVjayB1c2VyIGV4aXN0IChraGkgZ29pIGRlbiBkYXRhYmFzZSBwaGFpIGR1bmcgdHJ5IGFuZCBjYXRjaCBkZSBiYXQgbG9pIGtoaSBkYiBzdXAgaG9hYyBiaSBuZ2F0IG1hbmcpXG4gIHRyeSB7XG4gICAgY29uc3QgdXNlcnMgPSBhd2FpdCBVc2VyTW9kZWwuZmluZCgpO1xuICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gdXNlcnMuZmluZCgodSkgPT4gdS51c2VybmFtZSA9PT0gdXNlci51c2VybmFtZSk7XG4gICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgcmV0dXJuIHJlc1xuICAgICAgICAuc3RhdHVzKDQwMClcbiAgICAgICAgLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJJbmNvcnJlY3QgdXNlcm5hbWUgb3IgcGFzc3dvcmQhXCIgfSk7XG4gICAgfVxuXG4gICAgLy9jaGVjayBwYXNzd29yZCBleGlzdCAoY2h1IHkga2hpIGR1bmcgYXJnb24yLnZlcmlmeSB0aGkgY3VuZyBkYSBnb2kgZGUgZ29pIEFQSSBjdWEgdGh1IHZpZW4gYXJnb24yIG5lbiBiYXQvL1xuICAgIC8vYnVvYyBwaGFpIGR1bmcgYXdhaXQgeHUgbHkgYmF0IGRvbmcgYm8gLy9cblxuICAgIGNvbnN0IGNoZWNrUGFzc3dvcmQgPSBhd2FpdCBhcmdvbjIudmVyaWZ5KFxuICAgICAgY3VycmVudFVzZXIucGFzc3dvcmQsXG4gICAgICB1c2VyLnBhc3N3b3JkXG4gICAgKTtcblxuICAgIGlmICghY2hlY2tQYXNzd29yZCkge1xuICAgICAgcmV0dXJuIHJlc1xuICAgICAgICAuc3RhdHVzKDQwMClcbiAgICAgICAgLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJJbmNvcnJlY3QgdXNlcm5hbWUgb3IgcGFzc3dvcmQhXCIgfSk7XG4gICAgfVxuXG4gICAgLy9yZXR1cm4gdG9rZW5cblxuICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gand0LnNpZ24oXG4gICAgICB7IHVzZXJJZDogY3VycmVudFVzZXIuX2lkIH0sXG4gICAgICBwcm9jZXNzLmVudi5BQ0NFU1NfVE9LRU5fU0VDUkVUXG4gICAgKTtcblxuICAgIC8vc3VjY2Vzc1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZTogXCJVc2VyIGxvZ2dlZCBpbiBzdWNjZXNzZnVsbHkhXCIsXG4gICAgICBkYXRhOiB1c2VyLFxuICAgICAgdG9rZW46IGFjY2Vzc1Rva2VuLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgbWVzc2FnZTogXCJJbnRlcm5ldCBzZXJ2ZXIgZXJyb3IhXCIsXG4gICAgfSk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBnZXRVc2VyczogZ2V0VXNlcnMsXG4gIHJlZ2lzdGVyVXNlcjogcmVnaXN0ZXJVc2VyLFxuICBjaGVja0xvZ2luOiBjaGVja0xvZ2luLFxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQUY2QjtBQUNHO0FBRWhDQSxPQUFPLENBQUMsUUFBRCxDQUFQLENBQWtCQyxNQUFsQjs7QUFFQSxNQUFNQyxRQUFRLEdBQUcsT0FBT0MsR0FBUCxFQUFZQyxHQUFaLEtBQW9CO0VBQ25DLElBQUk7SUFDRixNQUFNQyxLQUFLLEdBQUcsTUFBTUMsa0JBQUEsQ0FBVUMsSUFBVixDQUFlO01BQUVDLFFBQVEsRUFBRTtJQUFaLENBQWYsRUFBb0MsQ0FBQ0MsR0FBRCxFQUFNQyxJQUFOLEtBQWU7TUFDckUsSUFBSUQsR0FBSixFQUFTO1FBQ1AsT0FBT0wsR0FBRyxDQUFDTyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7VUFDMUJDLE9BQU8sRUFBRSxLQURpQjtVQUUxQkMsT0FBTyxFQUFFTDtRQUZpQixDQUFyQixDQUFQO01BSUQ7SUFDRixDQVBtQixFQVFqQk0sSUFSaUIsQ0FRWjtNQUNKQyxVQUFVLEVBQUUsQ0FBQztJQURULENBUlksRUFXakJDLE1BWGlCLENBV1Y7TUFBRUQsVUFBVSxFQUFFLENBQWQ7TUFBaUJFLFNBQVMsRUFBRTtJQUE1QixDQVhVLEVBWWxCO0lBWmtCLENBYWpCQyxJQWJpQixDQWFaLEdBYlksQ0FBcEI7SUFjQUMsT0FBTyxDQUFDQyxHQUFSLENBQVloQixLQUFaO0lBQ0EsT0FBT0QsR0FBRyxDQUFDTyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7TUFDMUJDLE9BQU8sRUFBRSxJQURpQjtNQUUxQkMsT0FBTyxFQUFFLGVBRmlC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","map":{"version":3,"names":["require","config","getUsers","req","res","users","UserModel","find","isActive","err","docs","status","json","success","message","sort","first_name","select","last_name","skip","console","log","data","error","registerUser","user","body","email","gender","address","university","createdAt","Date","username","password","UserValidation","details","currentUser","findOne","hashedPassword","argon2","hash","newUser","save","accessToken","jwt","sign","userId","_id","process","env","ACCESS_TOKEN_SECRET","token","checkLogin","u","checkPassword","verify","module","exports"],"sourceRoot":"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/controllers/TodoController/","sources":["UserController.js"],"sourcesContent":["import UserModel from \"../../models/TodoModel/UserModel\";\nimport UserValidation from \"../../validation/TodoValidation/UserValidation\";\nimport argon2 from \"argon2\"; //add thu vien hashpassword\nimport jwt from \"jsonwebtoken\"; //add thu vien tao token\nimport { date } from \"joi\";\nrequire(\"dotenv\").config();\n\nconst getUsers = async (req, res) => {\n  try {\n    const users = await UserModel.find({ isActive: false }, (err, docs) => {\n      if (err) {\n        return res.status(400).json({\n          success: false,\n          message: err,\n        });\n      }\n    })\n      .sort({\n        first_name: -1,\n      })\n      .select({ first_name: 1, last_name: 1 })\n      // .limit(10)\n      .skip(100);\n    console.log(users);\n    return res.status(200).json({\n      success: true,\n      message: \"Get all user!\",\n      data: users,\n    });\n  } catch (error) {\n    console.log(error.message);\n    res.status(500).json({\n      success: false,\n      message: \"Internet server error!\",\n    });\n  }\n};\n\nconst registerUser = async (req, res) => {\n  const user = {\n    first_name: req.body.first_name,\n    last_name: req.body.last_name,\n    email: req.body.email,\n    gender: req.body.gender,\n    address: req.body.address,\n    university: req.body.university,\n    isActive: req.body.isActive,\n    createdAt: new Date(),\n    username: req.body.username,\n    password: req.body.password,\n  };\n  console.log(user);\n  //check missing params\n\n  if (!user.username || !user.password) {\n    return res\n      .status(400)\n      .json({ success: false, message: \"Missing user information!\" });\n  }\n\n  //validate user information\n\n  const { error } = UserValidation(user);\n  if (error) {\n    return res.status(400).json({\n      success: false,\n      message: `${error.details[0].message}`,\n    });\n  }\n\n  //check user exist\n  try {\n    const currentUser = await UserModel.findOne({ username: user.username });\n    if (currentUser) {\n      return res.status(400).json({\n        success: false,\n        message: \"User already exist!\",\n      });\n    }\n\n    //hash password\n\n    const hashedPassword = await argon2.hash(user.password);\n    let newUser = new UserModel({\n      username: user.username,\n      password: hashedPassword,\n      first_name: user.first_name,\n      last_name: user.last_name,\n      email: user.email,\n      gender: user.gender,\n      address: user.address,\n      university: user.university,\n      isActive: user.isActive,\n      createdAt: user.createdAt,\n    });\n    await newUser.save();\n\n    //return token\n\n    const accessToken = jwt.sign(\n      { userId: newUser._id },\n      process.env.ACCESS_TOKEN_SECRET\n    );\n\n    //success\n\n    return res.status(200).json({\n      success: true,\n      message: \"User created success!\",\n      data: newUser,\n      token: accessToken,\n    });\n  } catch (error) {\n    console.log(error.message);\n    res.status(500).json({\n      success: false,\n      message: \"Internet server error!\",\n    });\n  }\n};\n\nconst checkLogin = async (req, res) => {\n  const user = {\n    username: req.body.username,\n    password: req.body.password,\n  };\n  //check validation req.body\n  const { error } = UserValidation(user);\n  if (error) {\n    return res\n      .status(400)\n      .json({ success: false, message: `${error.details[0].message}` });\n  }\n\n  //check user exist (khi goi den database phai dung try and catch de bat loi khi db sup hoac bi ngat mang)\n  try {\n    const users = await UserModel.find();\n    const currentUser = users.find((u) => u.username === user.username);\n    if (!currentUser) {\n      return res\n        .status(400)\n        .json({ success: false, message: \"Incorrect username or password!\" });\n    }\n\n    //check password exist (chu y khi dung argon2.verify thi cung da goi de goi API cua thu vien argon2 nen bat//\n    //buoc phai dung await xu ly bat dong bo //\n\n    const checkPassword = await argon2.verify(\n      currentUser.password,\n      user.password\n    );\n\n    if (!checkPassword) {\n      return res\n        .status(400)\n        .json({ success: false, message: \"Incorrect username or password!\" });\n    }\n\n    //return token\n\n    const accessToken = jwt.sign(\n      { userId: currentUser._id },\n      process.env.ACCESS_TOKEN_SECRET\n    );\n\n    //success\n    return res.status(200).json({\n      success: true,\n      message: \"User logged in successfully!\",\n      data: user,\n      token: accessToken,\n    });\n  } catch (error) {\n    console.log(error.message);\n    res.status(500).json({\n      success: false,\n      message: \"Internet server error!\",\n    });\n  }\n};\n\nmodule.exports = {\n  getUsers: getUsers,\n  registerUser: registerUser,\n  checkLogin: checkLogin,\n};\n"],"mappings":"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"}},"mtime":1657214473016},"{\"assumptions\":{},\"sourceRoot\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/models/TodoModel/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server\",\"filename\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/models/TodoModel/UserModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.6:development":{"value":{"code":"\"use strict\";\n\nvar _joi = require(\"joi\");\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Schema = _mongoose.default.Schema;\nconst usersSchema = new Schema({\n  username: {\n    type: String,\n    required: true,\n    unique: true\n  },\n  password: {\n    type: String,\n    required: true\n  },\n  first_name: {\n    type: String,\n    uppercase: true,\n    // match: /[a-z]/,\n    default: \"Binh\"\n  },\n  last_name: {\n    type: String,\n    uppercase: true,\n    // match: /[a-z]/,\n    default: \"Doan Thanh\"\n  },\n  email: {\n    type: String\n  },\n  gender: {\n    type: String,\n    enum: [\"Male\", \"Female\", \"Non-binary\"]\n  },\n  address: {\n    type: String,\n    // match: /[a-z,1-9]/,\n    uppercase: true\n  },\n  university: {\n    type: String,\n    uppercase: true,\n    // match: /[a-z]/,\n    default: \"Back Khoa DN\"\n  },\n  isActive: {\n    type: Boolean,\n    default: false\n  },\n  createdAt: {\n    type: Date,\n    default: Date.now()\n  }\n});\nmodule.exports = _mongoose.default.model(\"users\", usersSchema);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTY2hlbWEiLCJtb25nb29zZSIsInVzZXJzU2NoZW1hIiwidXNlcm5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJ1bmlxdWUiLCJwYXNzd29yZCIsImZpcnN0X25hbWUiLCJ1cHBlcmNhc2UiLCJkZWZhdWx0IiwibGFzdF9uYW1lIiwiZW1haWwiLCJnZW5kZXIiLCJlbnVtIiwiYWRkcmVzcyIsInVuaXZlcnNpdHkiLCJpc0FjdGl2ZSIsIkJvb2xlYW4iLCJjcmVhdGVkQXQiLCJEYXRlIiwibm93IiwibW9kdWxlIiwiZXhwb3J0cyIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9iaW5oaHVuZXAvRGVza3RvcC9zb2Z0ZWNoL2JhdGNoMjFfTm9kZWpzL3NlcnZlci9zcmMvbW9kZWxzL1RvZG9Nb2RlbC8iLCJzb3VyY2VzIjpbIlVzZXJNb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBib29sZWFuLCBzdHJpbmcgfSBmcm9tIFwiam9pXCI7XG5pbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XG5cbmNvbnN0IFNjaGVtYSA9IG1vbmdvb3NlLlNjaGVtYTtcblxuY29uc3QgdXNlcnNTY2hlbWEgPSBuZXcgU2NoZW1hKHtcbiAgdXNlcm5hbWU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgdW5pcXVlOiB0cnVlLFxuICB9LFxuICBwYXNzd29yZDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgfSxcbiAgZmlyc3RfbmFtZToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICB1cHBlcmNhc2U6IHRydWUsXG4gICAgLy8gbWF0Y2g6IC9bYS16XS8sXG4gICAgZGVmYXVsdDogXCJCaW5oXCIsXG4gIH0sXG4gIGxhc3RfbmFtZToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICB1cHBlcmNhc2U6IHRydWUsXG4gICAgLy8gbWF0Y2g6IC9bYS16XS8sXG4gICAgZGVmYXVsdDogXCJEb2FuIFRoYW5oXCIsXG4gIH0sXG4gIGVtYWlsOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICB9LFxuICBnZW5kZXI6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZW51bTogW1wiTWFsZVwiLCBcIkZlbWFsZVwiLCBcIk5vbi1iaW5hcnlcIl0sXG4gIH0sXG4gIGFkZHJlc3M6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgLy8gbWF0Y2g6IC9bYS16LDEtOV0vLFxuICAgIHVwcGVyY2FzZTogdHJ1ZSxcbiAgfSxcbiAgdW5pdmVyc2l0eToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICB1cHBlcmNhc2U6IHRydWUsXG4gICAgLy8gbWF0Y2g6IC9bYS16XS8sXG4gICAgZGVmYXVsdDogXCJCYWNrIEtob2EgRE5cIixcbiAgfSxcbiAgaXNBY3RpdmU6IHtcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICB9LFxuICBjcmVhdGVkQXQ6IHsgdHlwZTogRGF0ZSwgZGVmYXVsdDogRGF0ZS5ub3coKSB9LFxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gbW9uZ29vc2UubW9kZWwoXCJ1c2Vyc1wiLCB1c2Vyc1NjaGVtYSk7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUE7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUdDLGlCQUFBLENBQVNELE1BQXhCO0FBRUEsTUFBTUUsV0FBVyxHQUFHLElBQUlGLE1BQUosQ0FBVztFQUM3QkcsUUFBUSxFQUFFO0lBQ1JDLElBQUksRUFBRUMsTUFERTtJQUVSQyxRQUFRLEVBQUUsSUFGRjtJQUdSQyxNQUFNLEVBQUU7RUFIQSxDQURtQjtFQU03QkMsUUFBUSxFQUFFO0lBQ1JKLElBQUksRUFBRUMsTUFERTtJQUVSQyxRQUFRLEVBQUU7RUFGRixDQU5tQjtFQVU3QkcsVUFBVSxFQUFFO0lBQ1ZMLElBQUksRUFBRUMsTUFESTtJQUVWSyxTQUFTLEVBQUUsSUFGRDtJQUdWO0lBQ0FDLE9BQU8sRUFBRTtFQUpDLENBVmlCO0VBZ0I3QkMsU0FBUyxFQUFFO0lBQ1RSLElBQUksRUFBRUMsTUFERztJQUVUSyxTQUFTLEVBQUUsSUFGRjtJQUdUO0lBQ0FDLE9BQU8sRUFBRTtFQUpBLENBaEJrQjtFQXNCN0JFLEtBQUssRUFBRTtJQUNMVCxJQUFJLEVBQUVDO0VBREQsQ0F0QnNCO0VBeUI3QlMsTUFBTSxFQUFFO0lBQ05WLElBQUksRUFBRUMsTUFEQTtJQUVOVSxJQUFJLEVBQUUsQ0FBQyxNQUFELEVBQVMsUUFBVCxFQUFtQixZQUFuQjtFQUZBLENBekJxQjtFQTZCN0JDLE9BQU8sRUFBRTtJQUNQWixJQUFJLEVBQUVDLE1BREM7SUFFUDtJQUNBSyxTQUFTLEVBQUU7RUFISixDQTdCb0I7RUFrQzdCTyxVQUFVLEVBQUU7SUFDVmIsSUFBSSxFQUFFQyxNQURJO0lBRVZLLFNBQVMsRUFBRSxJQUZEO0lBR1Y7SUFDQUMsT0FBTyxFQUFFO0VBSkMsQ0FsQ2lCO0VBd0M3Qk8sUUFBUSxFQUFFO0lBQ1JkLElBQUksRUFBRWUsT0FERTtJQUVSUixPQUFPLEVBQUU7RUFGRCxDQXhDbUI7RUE0QzdCUyxTQUFTLEVBQUU7SUFBRWhCLElBQUksRUFBRWlCLElBQVI7SUFBY1YsT0FBTyxFQUFFVSxJQUFJLENBQUNDLEdBQUw7RUFBdkI7QUE1Q2tCLENBQVgsQ0FBcEI7QUErQ0FDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQnZCLGlCQUFBLENBQVN3QixLQUFULENBQWUsT0FBZixFQUF3QnZCLFdBQXhCLENBQWpCIn0=","map":{"version":3,"names":["Schema","mongoose","usersSchema","username","type","String","required","unique","password","first_name","uppercase","default","last_name","email","gender","enum","address","university","isActive","Boolean","createdAt","Date","now","module","exports","model"],"sourceRoot":"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/models/TodoModel/","sources":["UserModel.js"],"sourcesContent":["import { boolean, string } from \"joi\";\nimport mongoose from \"mongoose\";\n\nconst Schema = mongoose.Schema;\n\nconst usersSchema = new Schema({\n  username: {\n    type: String,\n    required: true,\n    unique: true,\n  },\n  password: {\n    type: String,\n    required: true,\n  },\n  first_name: {\n    type: String,\n    uppercase: true,\n    // match: /[a-z]/,\n    default: \"Binh\",\n  },\n  last_name: {\n    type: String,\n    uppercase: true,\n    // match: /[a-z]/,\n    default: \"Doan Thanh\",\n  },\n  email: {\n    type: String,\n  },\n  gender: {\n    type: String,\n    enum: [\"Male\", \"Female\", \"Non-binary\"],\n  },\n  address: {\n    type: String,\n    // match: /[a-z,1-9]/,\n    uppercase: true,\n  },\n  university: {\n    type: String,\n    uppercase: true,\n    // match: /[a-z]/,\n    default: \"Back Khoa DN\",\n  },\n  isActive: {\n    type: Boolean,\n    default: false,\n  },\n  createdAt: { type: Date, default: Date.now() },\n});\n\nmodule.exports = mongoose.model(\"users\", usersSchema);\n"],"mappings":";;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAGC,iBAAA,CAASD,MAAxB;AAEA,MAAME,WAAW,GAAG,IAAIF,MAAJ,CAAW;EAC7BG,QAAQ,EAAE;IACRC,IAAI,EAAEC,MADE;IAERC,QAAQ,EAAE,IAFF;IAGRC,MAAM,EAAE;EAHA,CADmB;EAM7BC,QAAQ,EAAE;IACRJ,IAAI,EAAEC,MADE;IAERC,QAAQ,EAAE;EAFF,CANmB;EAU7BG,UAAU,EAAE;IACVL,IAAI,EAAEC,MADI;IAEVK,SAAS,EAAE,IAFD;IAGV;IACAC,OAAO,EAAE;EAJC,CAViB;EAgB7BC,SAAS,EAAE;IACTR,IAAI,EAAEC,MADG;IAETK,SAAS,EAAE,IAFF;IAGT;IACAC,OAAO,EAAE;EAJA,CAhBkB;EAsB7BE,KAAK,EAAE;IACLT,IAAI,EAAEC;EADD,CAtBsB;EAyB7BS,MAAM,EAAE;IACNV,IAAI,EAAEC,MADA;IAENU,IAAI,EAAE,CAAC,MAAD,EAAS,QAAT,EAAmB,YAAnB;EAFA,CAzBqB;EA6B7BC,OAAO,EAAE;IACPZ,IAAI,EAAEC,MADC;IAEP;IACAK,SAAS,EAAE;EAHJ,CA7BoB;EAkC7BO,UAAU,EAAE;IACVb,IAAI,EAAEC,MADI;IAEVK,SAAS,EAAE,IAFD;IAGV;IACAC,OAAO,EAAE;EAJC,CAlCiB;EAwC7BO,QAAQ,EAAE;IACRd,IAAI,EAAEe,OADE;IAERR,OAAO,EAAE;EAFD,CAxCmB;EA4C7BS,SAAS,EAAE;IAAEhB,IAAI,EAAEiB,IAAR;IAAcV,OAAO,EAAEU,IAAI,CAACC,GAAL;EAAvB;AA5CkB,CAAX,CAApB;AA+CAC,MAAM,CAACC,OAAP,GAAiBvB,iBAAA,CAASwB,KAAT,CAAe,OAAf,EAAwBvB,WAAxB,CAAjB"}},"mtime":1657274562461},"{\"assumptions\":{},\"sourceRoot\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/validation/TodoValidation/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server\",\"filename\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/validation/TodoValidation/UserValidation.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.6:development":{"value":{"code":"\"use strict\";\n\nvar _joi = _interopRequireDefault(require(\"joi\"));\n\nvar _joiPassword = require(\"joi-password\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst checkUser = user => {\n  const Schema = _joi.default.object({\n    username: _joi.default.string().email().required(),\n    password: _joiPassword.joiPassword.string().minOfSpecialCharacters(1).minOfUppercase(1).minOfNumeric(1).noWhiteSpaces().required(),\n    first_name: _joi.default.string().min(1).max(10),\n    last_name: _joi.default.string(),\n    email: _joi.default.string().email(),\n    gender: _joi.default.valid(\"Male\", \"Female\", \"Non-binary\"),\n    address: _joi.default.string().min(10).max(100),\n    university: _joi.default.string().min(10).max(100),\n    isActive: _joi.default.boolean(),\n    createdAt: _joi.default.date()\n  });\n\n  return Schema.validate(user);\n};\n\nmodule.exports = checkUser;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjaGVja1VzZXIiLCJ1c2VyIiwiU2NoZW1hIiwiSm9pIiwib2JqZWN0IiwidXNlcm5hbWUiLCJzdHJpbmciLCJlbWFpbCIsInJlcXVpcmVkIiwicGFzc3dvcmQiLCJqb2lQYXNzd29yZCIsIm1pbk9mU3BlY2lhbENoYXJhY3RlcnMiLCJtaW5PZlVwcGVyY2FzZSIsIm1pbk9mTnVtZXJpYyIsIm5vV2hpdGVTcGFjZXMiLCJmaXJzdF9uYW1lIiwibWluIiwibWF4IiwibGFzdF9uYW1lIiwiZ2VuZGVyIiwidmFsaWQiLCJhZGRyZXNzIiwidW5pdmVyc2l0eSIsImlzQWN0aXZlIiwiYm9vbGVhbiIsImNyZWF0ZWRBdCIsImRhdGUiLCJ2YWxpZGF0ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL2JpbmhodW5lcC9EZXNrdG9wL3NvZnRlY2gvYmF0Y2gyMV9Ob2RlanMvc2VydmVyL3NyYy92YWxpZGF0aW9uL1RvZG9WYWxpZGF0aW9uLyIsInNvdXJjZXMiOlsiVXNlclZhbGlkYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEpvaSBmcm9tIFwiam9pXCI7XG5pbXBvcnQgeyBqb2lQYXNzd29yZCB9IGZyb20gXCJqb2ktcGFzc3dvcmRcIjtcblxuY29uc3QgY2hlY2tVc2VyID0gKHVzZXIpID0+IHtcbiAgY29uc3QgU2NoZW1hID0gSm9pLm9iamVjdCh7XG4gICAgdXNlcm5hbWU6IEpvaS5zdHJpbmcoKS5lbWFpbCgpLnJlcXVpcmVkKCksXG4gICAgcGFzc3dvcmQ6IGpvaVBhc3N3b3JkXG4gICAgICAuc3RyaW5nKClcbiAgICAgIC5taW5PZlNwZWNpYWxDaGFyYWN0ZXJzKDEpXG4gICAgICAubWluT2ZVcHBlcmNhc2UoMSlcbiAgICAgIC5taW5PZk51bWVyaWMoMSlcbiAgICAgIC5ub1doaXRlU3BhY2VzKClcbiAgICAgIC5yZXF1aXJlZCgpLFxuICAgIGZpcnN0X25hbWU6IEpvaS5zdHJpbmcoKS5taW4oMSkubWF4KDEwKSxcbiAgICBsYXN0X25hbWU6IEpvaS5zdHJpbmcoKSxcbiAgICBlbWFpbDogSm9pLnN0cmluZygpLmVtYWlsKCksXG4gICAgZ2VuZGVyOiBKb2kudmFsaWQoXCJNYWxlXCIsIFwiRmVtYWxlXCIsIFwiTm9uLWJpbmFyeVwiKSxcbiAgICBhZGRyZXNzOiBKb2kuc3RyaW5nKCkubWluKDEwKS5tYXgoMTAwKSxcbiAgICB1bml2ZXJzaXR5OiBKb2kuc3RyaW5nKCkubWluKDEwKS5tYXgoMTAwKSxcbiAgICBpc0FjdGl2ZTogSm9pLmJvb2xlYW4oKSxcbiAgICBjcmVhdGVkQXQ6IEpvaS5kYXRlKCksXG4gIH0pO1xuICByZXR1cm4gU2NoZW1hLnZhbGlkYXRlKHVzZXIpO1xufTtcbm1vZHVsZS5leHBvcnRzID0gY2hlY2tVc2VyO1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOzs7O0FBRUEsTUFBTUEsU0FBUyxHQUFJQyxJQUFELElBQVU7RUFDMUIsTUFBTUMsTUFBTSxHQUFHQyxZQUFBLENBQUlDLE1BQUosQ0FBVztJQUN4QkMsUUFBUSxFQUFFRixZQUFBLENBQUlHLE1BQUosR0FBYUMsS0FBYixHQUFxQkMsUUFBckIsRUFEYztJQUV4QkMsUUFBUSxFQUFFQyx3QkFBQSxDQUNQSixNQURPLEdBRVBLLHNCQUZPLENBRWdCLENBRmhCLEVBR1BDLGNBSE8sQ0FHUSxDQUhSLEVBSVBDLFlBSk8sQ0FJTSxDQUpOLEVBS1BDLGFBTE8sR0FNUE4sUUFOTyxFQUZjO0lBU3hCTyxVQUFVLEVBQUVaLFlBQUEsQ0FBSUcsTUFBSixHQUFhVSxHQUFiLENBQWlCLENBQWpCLEVBQW9CQyxHQUFwQixDQUF3QixFQUF4QixDQVRZO0lBVXhCQyxTQUFTLEVBQUVmLFlBQUEsQ0FBSUcsTUFBSixFQVZhO0lBV3hCQyxLQUFLLEVBQUVKLFlBQUEsQ0FBSUcsTUFBSixHQUFhQyxLQUFiLEVBWGlCO0lBWXhCWSxNQUFNLEVBQUVoQixZQUFBLENBQUlpQixLQUFKLENBQVUsTUFBVixFQUFrQixRQUFsQixFQUE0QixZQUE1QixDQVpnQjtJQWF4QkMsT0FBTyxFQUFFbEIsWUFBQSxDQUFJRyxNQUFKLEdBQWFVLEdBQWIsQ0FBaUIsRUFBakIsRUFBcUJDLEdBQXJCLENBQXlCLEdBQXpCLENBYmU7SUFjeEJLLFVBQVUsRUFBRW5CLFlBQUEsQ0FBSUcsTUFBSixHQUFhVSxHQUFiLENBQWlCLEVBQWpCLEVBQXFCQyxHQUFyQixDQUF5QixHQUF6QixDQWRZO0lBZXhCTSxRQUFRLEVBQUVwQixZQUFBLENBQUlxQixPQUFKLEVBZmM7SUFnQnhCQyxTQUFTLEVBQUV0QixZQUFBLENBQUl1QixJQUFKO0VBaEJhLENBQVgsQ0FBZjs7RUFrQkEsT0FBT3hCLE1BQU0sQ0FBQ3lCLFFBQVAsQ0FBZ0IxQixJQUFoQixDQUFQO0FBQ0QsQ0FwQkQ7O0FBcUJBMkIsTUFBTSxDQUFDQyxPQUFQLEdBQWlCN0IsU0FBakIifQ==","map":{"version":3,"names":["checkUser","user","Schema","Joi","object","username","string","email","required","password","joiPassword","minOfSpecialCharacters","minOfUppercase","minOfNumeric","noWhiteSpaces","first_name","min","max","last_name","gender","valid","address","university","isActive","boolean","createdAt","date","validate","module","exports"],"sourceRoot":"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/validation/TodoValidation/","sources":["UserValidation.js"],"sourcesContent":["import Joi from \"joi\";\nimport { joiPassword } from \"joi-password\";\n\nconst checkUser = (user) => {\n  const Schema = Joi.object({\n    username: Joi.string().email().required(),\n    password: joiPassword\n      .string()\n      .minOfSpecialCharacters(1)\n      .minOfUppercase(1)\n      .minOfNumeric(1)\n      .noWhiteSpaces()\n      .required(),\n    first_name: Joi.string().min(1).max(10),\n    last_name: Joi.string(),\n    email: Joi.string().email(),\n    gender: Joi.valid(\"Male\", \"Female\", \"Non-binary\"),\n    address: Joi.string().min(10).max(100),\n    university: Joi.string().min(10).max(100),\n    isActive: Joi.boolean(),\n    createdAt: Joi.date(),\n  });\n  return Schema.validate(user);\n};\nmodule.exports = checkUser;\n"],"mappings":";;AAAA;;AACA;;;;AAEA,MAAMA,SAAS,GAAIC,IAAD,IAAU;EAC1B,MAAMC,MAAM,GAAGC,YAAA,CAAIC,MAAJ,CAAW;IACxBC,QAAQ,EAAEF,YAAA,CAAIG,MAAJ,GAAaC,KAAb,GAAqBC,QAArB,EADc;IAExBC,QAAQ,EAAEC,wBAAA,CACPJ,MADO,GAEPK,sBAFO,CAEgB,CAFhB,EAGPC,cAHO,CAGQ,CAHR,EAIPC,YAJO,CAIM,CAJN,EAKPC,aALO,GAMPN,QANO,EAFc;IASxBO,UAAU,EAAEZ,YAAA,CAAIG,MAAJ,GAAaU,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,EAAxB,CATY;IAUxBC,SAAS,EAAEf,YAAA,CAAIG,MAAJ,EAVa;IAWxBC,KAAK,EAAEJ,YAAA,CAAIG,MAAJ,GAAaC,KAAb,EAXiB;IAYxBY,MAAM,EAAEhB,YAAA,CAAIiB,KAAJ,CAAU,MAAV,EAAkB,QAAlB,EAA4B,YAA5B,CAZgB;IAaxBC,OAAO,EAAElB,YAAA,CAAIG,MAAJ,GAAaU,GAAb,CAAiB,EAAjB,EAAqBC,GAArB,CAAyB,GAAzB,CAbe;IAcxBK,UAAU,EAAEnB,YAAA,CAAIG,MAAJ,GAAaU,GAAb,CAAiB,EAAjB,EAAqBC,GAArB,CAAyB,GAAzB,CAdY;IAexBM,QAAQ,EAAEpB,YAAA,CAAIqB,OAAJ,EAfc;IAgBxBC,SAAS,EAAEtB,YAAA,CAAIuB,IAAJ;EAhBa,CAAX,CAAf;;EAkBA,OAAOxB,MAAM,CAACyB,QAAP,CAAgB1B,IAAhB,CAAP;AACD,CApBD;;AAqBA2B,MAAM,CAACC,OAAP,GAAiB7B,SAAjB"}},"mtime":1657332318699},"{\"assumptions\":{},\"sourceRoot\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/router/TodoRouter/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server\",\"filename\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/router/TodoRouter/PostRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.6:development":{"value":{"code":"\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _PostController = _interopRequireDefault(require(\"../../controllers/TodoController/PostController\"));\n\nvar _UserMiddleware = _interopRequireDefault(require(\"../../middleware/Todo/UserMiddleware\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//import middleware (bac bao ve)\nconst Router = _express.default.Router();\n\nconst PostRouter = app => {\n  Router.post(\"/createPost\", _UserMiddleware.default, _PostController.default.createPost);\n  Router.get(\"/\", _UserMiddleware.default, _PostController.default.readPosts);\n  Router.put(\"/updatePost/:id\", _UserMiddleware.default, _PostController.default.updatePost);\n  Router.delete(\"/deletePost/:id\", _UserMiddleware.default, _PostController.default.deletePost);\n  return app.use(\"/api/Todo/Post\", Router);\n};\n\nmodule.exports = PostRouter;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSb3V0ZXIiLCJleHByZXNzIiwiUG9zdFJvdXRlciIsImFwcCIsInBvc3QiLCJ2ZXJpZnlUb2tlbiIsIlBvc3RDb250cm9sbGVyIiwiY3JlYXRlUG9zdCIsImdldCIsInJlYWRQb3N0cyIsInB1dCIsInVwZGF0ZVBvc3QiLCJkZWxldGUiLCJkZWxldGVQb3N0IiwidXNlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvYmluaGh1bmVwL0Rlc2t0b3Avc29mdGVjaC9iYXRjaDIxX05vZGVqcy9zZXJ2ZXIvc3JjL3JvdXRlci9Ub2RvUm91dGVyLyIsInNvdXJjZXMiOlsiUG9zdFJvdXRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IFBvc3RDb250cm9sbGVyIGZyb20gXCIuLi8uLi9jb250cm9sbGVycy9Ub2RvQ29udHJvbGxlci9Qb3N0Q29udHJvbGxlclwiO1xuXG4vL2ltcG9ydCBtaWRkbGV3YXJlIChiYWMgYmFvIHZlKVxuaW1wb3J0IHZlcmlmeVRva2VuIGZyb20gXCIuLi8uLi9taWRkbGV3YXJlL1RvZG8vVXNlck1pZGRsZXdhcmVcIjtcblxuY29uc3QgUm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxuY29uc3QgUG9zdFJvdXRlciA9IChhcHApID0+IHtcbiAgUm91dGVyLnBvc3QoXCIvY3JlYXRlUG9zdFwiLCB2ZXJpZnlUb2tlbiwgUG9zdENvbnRyb2xsZXIuY3JlYXRlUG9zdCk7XG5cbiAgUm91dGVyLmdldChcIi9cIiwgdmVyaWZ5VG9rZW4sIFBvc3RDb250cm9sbGVyLnJlYWRQb3N0cyk7XG5cbiAgUm91dGVyLnB1dChcIi91cGRhdGVQb3N0LzppZFwiLCB2ZXJpZnlUb2tlbiwgUG9zdENvbnRyb2xsZXIudXBkYXRlUG9zdCk7XG5cbiAgUm91dGVyLmRlbGV0ZShcIi9kZWxldGVQb3N0LzppZFwiLCB2ZXJpZnlUb2tlbiwgUG9zdENvbnRyb2xsZXIuZGVsZXRlUG9zdCk7XG5cbiAgcmV0dXJuIGFwcC51c2UoXCIvYXBpL1RvZG8vUG9zdFwiLCBSb3V0ZXIpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBQb3N0Um91dGVyO1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOztBQUdBOzs7O0FBREE7QUFHQSxNQUFNQSxNQUFNLEdBQUdDLGdCQUFBLENBQVFELE1BQVIsRUFBZjs7QUFFQSxNQUFNRSxVQUFVLEdBQUlDLEdBQUQsSUFBUztFQUMxQkgsTUFBTSxDQUFDSSxJQUFQLENBQVksYUFBWixFQUEyQkMsdUJBQTNCLEVBQXdDQyx1QkFBQSxDQUFlQyxVQUF2RDtFQUVBUCxNQUFNLENBQUNRLEdBQVAsQ0FBVyxHQUFYLEVBQWdCSCx1QkFBaEIsRUFBNkJDLHVCQUFBLENBQWVHLFNBQTVDO0VBRUFULE1BQU0sQ0FBQ1UsR0FBUCxDQUFXLGlCQUFYLEVBQThCTCx1QkFBOUIsRUFBMkNDLHVCQUFBLENBQWVLLFVBQTFEO0VBRUFYLE1BQU0sQ0FBQ1ksTUFBUCxDQUFjLGlCQUFkLEVBQWlDUCx1QkFBakMsRUFBOENDLHVCQUFBLENBQWVPLFVBQTdEO0VBRUEsT0FBT1YsR0FBRyxDQUFDVyxHQUFKLENBQVEsZ0JBQVIsRUFBMEJkLE1BQTFCLENBQVA7QUFDRCxDQVZEOztBQVlBZSxNQUFNLENBQUNDLE9BQVAsR0FBaUJkLFVBQWpCIn0=","map":{"version":3,"names":["Router","express","PostRouter","app","post","verifyToken","PostController","createPost","get","readPosts","put","updatePost","delete","deletePost","use","module","exports"],"sourceRoot":"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/router/TodoRouter/","sources":["PostRouter.js"],"sourcesContent":["import express from \"express\";\nimport PostController from \"../../controllers/TodoController/PostController\";\n\n//import middleware (bac bao ve)\nimport verifyToken from \"../../middleware/Todo/UserMiddleware\";\n\nconst Router = express.Router();\n\nconst PostRouter = (app) => {\n  Router.post(\"/createPost\", verifyToken, PostController.createPost);\n\n  Router.get(\"/\", verifyToken, PostController.readPosts);\n\n  Router.put(\"/updatePost/:id\", verifyToken, PostController.updatePost);\n\n  Router.delete(\"/deletePost/:id\", verifyToken, PostController.deletePost);\n\n  return app.use(\"/api/Todo/Post\", Router);\n};\n\nmodule.exports = PostRouter;\n"],"mappings":";;AAAA;;AACA;;AAGA;;;;AADA;AAGA,MAAMA,MAAM,GAAGC,gBAAA,CAAQD,MAAR,EAAf;;AAEA,MAAME,UAAU,GAAIC,GAAD,IAAS;EAC1BH,MAAM,CAACI,IAAP,CAAY,aAAZ,EAA2BC,uBAA3B,EAAwCC,uBAAA,CAAeC,UAAvD;EAEAP,MAAM,CAACQ,GAAP,CAAW,GAAX,EAAgBH,uBAAhB,EAA6BC,uBAAA,CAAeG,SAA5C;EAEAT,MAAM,CAACU,GAAP,CAAW,iBAAX,EAA8BL,uBAA9B,EAA2CC,uBAAA,CAAeK,UAA1D;EAEAX,MAAM,CAACY,MAAP,CAAc,iBAAd,EAAiCP,uBAAjC,EAA8CC,uBAAA,CAAeO,UAA7D;EAEA,OAAOV,GAAG,CAACW,GAAJ,CAAQ,gBAAR,EAA0Bd,MAA1B,CAAP;AACD,CAVD;;AAYAe,MAAM,CAACC,OAAP,GAAiBd,UAAjB"}},"mtime":1657109423383},"{\"assumptions\":{},\"sourceRoot\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/controllers/TodoController/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server\",\"filename\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/controllers/TodoController/PostController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.6:development":{"value":{"code":"\"use strict\";\n\nvar _PostModel = _interopRequireDefault(require(\"../../models/TodoModel/PostModel\"));\n\nvar _PostValidation = _interopRequireDefault(require(\"../../validation/TodoValidation/PostValidation\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst createPost = async (req, res) => {\n  const post = {\n    title: req.body.title,\n    description: req.body.description,\n    url: req.body.url,\n    status: req.body.status\n  }; //check title\n\n  if (!post.title) {\n    return res.status(400).json({\n      success: false,\n      message: \"Tittle is required!\"\n    });\n  } //check validate req.body\n\n\n  const {\n    error\n  } = (0, _PostValidation.default)(post);\n\n  if (error) {\n    return res.status(400).json({\n      success: false,\n      message: error.details[0].message\n    });\n  } // success\n\n\n  try {\n    const url = post.url;\n    const newPost = await new _PostModel.default({\n      title: post.title,\n      description: post.description,\n      url: url?.startsWith(\"https://\") ? post.url : `https://${post.url}`,\n      status: post.status || \"TO LEARN\",\n      user: req.userId //req.userId nay khong phai nguoi dung nhap ma ta da cho middleware gan gia tri userId tuong ung voi token (noi cach khac, nguoi dung chi nhap token va middleware da truy nguoc lai userId tuong ung) sau khi next()\n\n    });\n    await newPost.save();\n    return res.status(200).json({\n      success: true,\n      message: \"Happy learning\",\n      post: newPost\n    });\n  } catch (error) {\n    console.log(error.message);\n    res.status(500).json({\n      success: false,\n      message: \"Internet server error!\"\n    });\n  }\n};\n\nconst readPosts = async (req, res) => {\n  try {\n    const posts = await _PostModel.default.find({\n      user: req.userId\n    }).populate(\"user\", [\"createdAt\", \"username\"]);\n    return res.status(200).json({\n      success: true,\n      message: \"get all post\",\n      data: posts\n    });\n  } catch (error) {\n    console.log(error.message);\n    return res.status(403).json({\n      success: false,\n      message: \"server disconnected\"\n    });\n  }\n};\n\nconst updatePost = async (req, res) => {\n  const postId = req.params.id;\n\n  if (!postId) {\n    return res.status(400).json({\n      success: false,\n      message: \"Missing params id\"\n    });\n  }\n\n  try {\n    const posts = await _PostModel.default.find({\n      user: req.userId\n    });\n    const currentPost = posts.find(p => p.id === postId);\n\n    if (!currentPost) {\n      return res.status(400).json({\n        success: false,\n        message: \"Post not found!\"\n      });\n    }\n\n    const url = req.body.url;\n    const updatePost = {\n      title: req.body.title,\n      status: req.body.status || \"TO LEARN\",\n      description: req.body.description || \"\",\n      url: url?.startsWith(\"https://\") ? url : `https://${url}`\n    };\n    const {\n      error\n    } = await (0, _PostValidation.default)(updatePost);\n\n    if (error) {\n      return res.status(400).json({\n        success: false,\n        message: error.details[0].message\n      });\n    } //success\n\n\n    const updateCondition = {\n      _id: req.params.id\n    };\n    const updatePostModel = await _PostModel.default.findOneAndUpdate(updateCondition, updatePost, {\n      new: true\n    });\n    console.log(updatePostModel);\n    return res.status(200).json({\n      success: true,\n      message: \"Update post success!\",\n      data: updatePost\n    });\n  } catch (error) {\n    console.log(error.message);\n    return res.status(403).json({\n      success: false,\n      message: \"server disconnected\"\n    });\n  }\n};\n\nconst deletePost = async (req, res) => {\n  const postId = req.params.id;\n\n  if (!postId) {\n    return res.status(400).json({\n      success: false,\n      message: \"Post not found!\"\n    });\n  }\n\n  try {\n    await _PostModel.default.deleteOne({\n      _id: postId\n    });\n    return res.status(200).json({\n      success: true,\n      message: \"Post deleted!\"\n    });\n  } catch (error) {\n    console.log(error.message);\n    return res.status(403).json({\n      success: false,\n      message: \"Server disconnected!\"\n    });\n  }\n};\n\nmodule.exports = {\n  createPost: createPost,\n  readPosts: readPosts,\n  updatePost: updatePost,\n  deletePost: deletePost\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjcmVhdGVQb3N0IiwicmVxIiwicmVzIiwicG9zdCIsInRpdGxlIiwiYm9keSIsImRlc2NyaXB0aW9uIiwidXJsIiwic3RhdHVzIiwianNvbiIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwiZXJyb3IiLCJQb3N0VmFsaWRhdGlvbiIsImRldGFpbHMiLCJuZXdQb3N0IiwiUG9zdE1vZGVsIiwic3RhcnRzV2l0aCIsInVzZXIiLCJ1c2VySWQiLCJzYXZlIiwiY29uc29sZSIsImxvZyIsInJlYWRQb3N0cyIsInBvc3RzIiwiZmluZCIsInBvcHVsYXRlIiwiZGF0YSIsInVwZGF0ZVBvc3QiLCJwb3N0SWQiLCJwYXJhbXMiLCJpZCIsImN1cnJlbnRQb3N0IiwicCIsInVwZGF0ZUNvbmRpdGlvbiIsIl9pZCIsInVwZGF0ZVBvc3RNb2RlbCIsImZpbmRPbmVBbmRVcGRhdGUiLCJuZXciLCJkZWxldGVQb3N0IiwiZGVsZXRlT25lIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvYmluaGh1bmVwL0Rlc2t0b3Avc29mdGVjaC9iYXRjaDIxX05vZGVqcy9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXJzL1RvZG9Db250cm9sbGVyLyIsInNvdXJjZXMiOlsiUG9zdENvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBvc3RNb2RlbCBmcm9tIFwiLi4vLi4vbW9kZWxzL1RvZG9Nb2RlbC9Qb3N0TW9kZWxcIjtcbmltcG9ydCBQb3N0VmFsaWRhdGlvbiBmcm9tIFwiLi4vLi4vdmFsaWRhdGlvbi9Ub2RvVmFsaWRhdGlvbi9Qb3N0VmFsaWRhdGlvblwiO1xuXG5jb25zdCBjcmVhdGVQb3N0ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHBvc3QgPSB7XG4gICAgdGl0bGU6IHJlcS5ib2R5LnRpdGxlLFxuICAgIGRlc2NyaXB0aW9uOiByZXEuYm9keS5kZXNjcmlwdGlvbixcbiAgICB1cmw6IHJlcS5ib2R5LnVybCxcbiAgICBzdGF0dXM6IHJlcS5ib2R5LnN0YXR1cyxcbiAgfTtcblxuICAvL2NoZWNrIHRpdGxlXG5cbiAgaWYgKCFwb3N0LnRpdGxlKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgbWVzc2FnZTogXCJUaXR0bGUgaXMgcmVxdWlyZWQhXCIsXG4gICAgfSk7XG4gIH1cblxuICAvL2NoZWNrIHZhbGlkYXRlIHJlcS5ib2R5XG4gIGNvbnN0IHsgZXJyb3IgfSA9IFBvc3RWYWxpZGF0aW9uKHBvc3QpO1xuXG4gIGlmIChlcnJvcikge1xuICAgIHJldHVybiByZXNcbiAgICAgIC5zdGF0dXMoNDAwKVxuICAgICAgLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogZXJyb3IuZGV0YWlsc1swXS5tZXNzYWdlIH0pO1xuICB9XG5cbiAgLy8gc3VjY2Vzc1xuXG4gIHRyeSB7XG4gICAgY29uc3QgdXJsID0gcG9zdC51cmw7XG4gICAgY29uc3QgbmV3UG9zdCA9IGF3YWl0IG5ldyBQb3N0TW9kZWwoe1xuICAgICAgdGl0bGU6IHBvc3QudGl0bGUsXG4gICAgICBkZXNjcmlwdGlvbjogcG9zdC5kZXNjcmlwdGlvbixcbiAgICAgIHVybDogdXJsPy5zdGFydHNXaXRoKFwiaHR0cHM6Ly9cIikgPyBwb3N0LnVybCA6IGBodHRwczovLyR7cG9zdC51cmx9YCxcbiAgICAgIHN0YXR1czogcG9zdC5zdGF0dXMgfHwgXCJUTyBMRUFSTlwiLFxuICAgICAgdXNlcjogcmVxLnVzZXJJZCwgLy9yZXEudXNlcklkIG5heSBraG9uZyBwaGFpIG5ndW9pIGR1bmcgbmhhcCBtYSB0YSBkYSBjaG8gbWlkZGxld2FyZSBnYW4gZ2lhIHRyaSB1c2VySWQgdHVvbmcgdW5nIHZvaSB0b2tlbiAobm9pIGNhY2gga2hhYywgbmd1b2kgZHVuZyBjaGkgbmhhcCB0b2tlbiB2YSBtaWRkbGV3YXJlIGRhIHRydXkgbmd1b2MgbGFpIHVzZXJJZCB0dW9uZyB1bmcpIHNhdSBraGkgbmV4dCgpXG4gICAgfSk7XG4gICAgYXdhaXQgbmV3UG9zdC5zYXZlKCk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtZXNzYWdlOiBcIkhhcHB5IGxlYXJuaW5nXCIsXG4gICAgICBwb3N0OiBuZXdQb3N0LFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgbWVzc2FnZTogXCJJbnRlcm5ldCBzZXJ2ZXIgZXJyb3IhXCIsXG4gICAgfSk7XG4gIH1cbn07XG5cbmNvbnN0IHJlYWRQb3N0cyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHBvc3RzID0gYXdhaXQgUG9zdE1vZGVsLmZpbmQoeyB1c2VyOiByZXEudXNlcklkIH0pLnBvcHVsYXRlKFwidXNlclwiLCBbXG4gICAgICBcImNyZWF0ZWRBdFwiLFxuICAgICAgXCJ1c2VybmFtZVwiLFxuICAgIF0pO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZTogXCJnZXQgYWxsIHBvc3RcIixcbiAgICAgIGRhdGE6IHBvc3RzLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6IFwic2VydmVyIGRpc2Nvbm5lY3RlZFwiLFxuICAgIH0pO1xuICB9XG59O1xuXG5jb25zdCB1cGRhdGVQb3N0ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHBvc3RJZCA9IHJlcS5wYXJhbXMuaWQ7XG4gIGlmICghcG9zdElkKSB7XG4gICAgcmV0dXJuIHJlc1xuICAgICAgLnN0YXR1cyg0MDApXG4gICAgICAuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIk1pc3NpbmcgcGFyYW1zIGlkXCIgfSk7XG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCBwb3N0cyA9IGF3YWl0IFBvc3RNb2RlbC5maW5kKHsgdXNlcjogcmVxLnVzZXJJZCB9KTtcbiAgICBjb25zdCBjdXJyZW50UG9zdCA9IHBvc3RzLmZpbmQoKHApID0+IHAuaWQgPT09IHBvc3RJZCk7XG4gICAgaWYgKCFjdXJyZW50UG9zdCkge1xuICAgICAgcmV0dXJuIHJlc1xuICAgICAgICAuc3RhdHVzKDQwMClcbiAgICAgICAgLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJQb3N0IG5vdCBmb3VuZCFcIiB9KTtcbiAgICB9XG4gICAgY29uc3QgdXJsID0gcmVxLmJvZHkudXJsO1xuICAgIGNvbnN0IHVwZGF0ZVBvc3QgPSB7XG4gICAgICB0aXRsZTogcmVxLmJvZHkudGl0bGUsXG4gICAgICBzdGF0dXM6IHJlcS5ib2R5LnN0YXR1cyB8fCBcIlRPIExFQVJOXCIsXG4gICAgICBkZXNjcmlwdGlvbjogcmVxLmJvZHkuZGVzY3JpcHRpb24gfHwgXCJcIixcbiAgICAgIHVybDogdXJsPy5zdGFydHNXaXRoKFwiaHR0cHM6Ly9cIikgPyB1cmwgOiBgaHR0cHM6Ly8ke3VybH1gLFxuICAgIH07XG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgUG9zdFZhbGlkYXRpb24odXBkYXRlUG9zdCk7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IuZGV0YWlsc1swXS5tZXNzYWdlLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy9zdWNjZXNzXG4gICAgY29uc3QgdXBkYXRlQ29uZGl0aW9uID0geyBfaWQ6IHJlcS5wYXJhbXMuaWQgfTtcbiAgICBjb25zdCB1cGRhdGVQb3N0TW9kZWwgPSBhd2FpdCBQb3N0TW9kZWwuZmluZE9uZUFuZFVwZGF0ZShcbiAgICAgIHVwZGF0ZUNvbmRpdGlvbixcbiAgICAgIHVwZGF0ZVBvc3QsXG4gICAgICB7IG5ldzogdHJ1ZSB9XG4gICAgKTtcblxuICAgIGNvbnNvbGUubG9nKHVwZGF0ZVBvc3RNb2RlbCk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtZXNzYWdlOiBcIlVwZGF0ZSBwb3N0IHN1Y2Nlc3MhXCIsXG4gICAgICBkYXRhOiB1cGRhdGVQb3N0LFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6IFwic2VydmVyIGRpc2Nvbm5lY3RlZFwiLFxuICAgIH0pO1xuICB9XG59O1xuXG5jb25zdCBkZWxldGVQb3N0ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHBvc3RJZCA9IHJlcS5wYXJhbXMuaWQ7XG4gIGlmICghcG9zdElkKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgbWVzc2FnZTogXCJQb3N0IG5vdCBmb3VuZCFcIixcbiAgICB9KTtcbiAgfVxuICB0cnkge1xuICAgIGF3YWl0IFBvc3RNb2RlbC5kZWxldGVPbmUoeyBfaWQ6IHBvc3RJZCB9KTtcblxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZTogXCJQb3N0IGRlbGV0ZWQhXCIsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgbWVzc2FnZTogXCJTZXJ2ZXIgZGlzY29ubmVjdGVkIVwiLFxuICAgIH0pO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlUG9zdDogY3JlYXRlUG9zdCxcbiAgcmVhZFBvc3RzOiByZWFkUG9zdHMsXG4gIHVwZGF0ZVBvc3Q6IHVwZGF0ZVBvc3QsXG4gIGRlbGV0ZVBvc3Q6IGRlbGV0ZVBvc3QsXG59O1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOzs7O0FBRUEsTUFBTUEsVUFBVSxHQUFHLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixLQUFvQjtFQUNyQyxNQUFNQyxJQUFJLEdBQUc7SUFDWEMsS0FBSyxFQUFFSCxHQUFHLENBQUNJLElBQUosQ0FBU0QsS0FETDtJQUVYRSxXQUFXLEVBQUVMLEdBQUcsQ0FBQ0ksSUFBSixDQUFTQyxXQUZYO0lBR1hDLEdBQUcsRUFBRU4sR0FBRyxDQUFDSSxJQUFKLENBQVNFLEdBSEg7SUFJWEMsTUFBTSxFQUFFUCxHQUFHLENBQUNJLElBQUosQ0FBU0c7RUFKTixDQUFiLENBRHFDLENBUXJDOztFQUVBLElBQUksQ0FBQ0wsSUFBSSxDQUFDQyxLQUFWLEVBQWlCO0lBQ2YsT0FBT0YsR0FBRyxDQUFDTSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7TUFDMUJDLE9BQU8sRUFBRSxLQURpQjtNQUUxQkMsT0FBTyxFQUFFO0lBRmlCLENBQXJCLENBQVA7RUFJRCxDQWZvQyxDQWlCckM7OztFQUNBLE1BQU07SUFBRUM7RUFBRixJQUFZLElBQUFDLHVCQUFBLEVBQWVWLElBQWYsQ0FBbEI7O0VBRUEsSUFBSVMsS0FBSixFQUFXO0lBQ1QsT0FBT1YsR0FBRyxDQUNQTSxNQURJLENBQ0csR0FESCxFQUVKQyxJQUZJLENBRUM7TUFBRUMsT0FBTyxFQUFFLEtBQVg7TUFBa0JDLE9BQU8sRUFBRUMsS0FB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","map":{"version":3,"names":["createPost","req","res","post","title","body","description","url","status","json","success","message","error","PostValidation","details","newPost","PostModel","startsWith","user","userId","save","console","log","readPosts","posts","find","populate","data","updatePost","postId","params","id","currentPost","p","updateCondition","_id","updatePostModel","findOneAndUpdate","new","deletePost","deleteOne","module","exports"],"sourceRoot":"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/controllers/TodoController/","sources":["PostController.js"],"sourcesContent":["import PostModel from \"../../models/TodoModel/PostModel\";\nimport PostValidation from \"../../validation/TodoValidation/PostValidation\";\n\nconst createPost = async (req, res) => {\n  const post = {\n    title: req.body.title,\n    description: req.body.description,\n    url: req.body.url,\n    status: req.body.status,\n  };\n\n  //check title\n\n  if (!post.title) {\n    return res.status(400).json({\n      success: false,\n      message: \"Tittle is required!\",\n    });\n  }\n\n  //check validate req.body\n  const { error } = PostValidation(post);\n\n  if (error) {\n    return res\n      .status(400)\n      .json({ success: false, message: error.details[0].message });\n  }\n\n  // success\n\n  try {\n    const url = post.url;\n    const newPost = await new PostModel({\n      title: post.title,\n      description: post.description,\n      url: url?.startsWith(\"https://\") ? post.url : `https://${post.url}`,\n      status: post.status || \"TO LEARN\",\n      user: req.userId, //req.userId nay khong phai nguoi dung nhap ma ta da cho middleware gan gia tri userId tuong ung voi token (noi cach khac, nguoi dung chi nhap token va middleware da truy nguoc lai userId tuong ung) sau khi next()\n    });\n    await newPost.save();\n    return res.status(200).json({\n      success: true,\n      message: \"Happy learning\",\n      post: newPost,\n    });\n  } catch (error) {\n    console.log(error.message);\n    res.status(500).json({\n      success: false,\n      message: \"Internet server error!\",\n    });\n  }\n};\n\nconst readPosts = async (req, res) => {\n  try {\n    const posts = await PostModel.find({ user: req.userId }).populate(\"user\", [\n      \"createdAt\",\n      \"username\",\n    ]);\n    return res.status(200).json({\n      success: true,\n      message: \"get all post\",\n      data: posts,\n    });\n  } catch (error) {\n    console.log(error.message);\n    return res.status(403).json({\n      success: false,\n      message: \"server disconnected\",\n    });\n  }\n};\n\nconst updatePost = async (req, res) => {\n  const postId = req.params.id;\n  if (!postId) {\n    return res\n      .status(400)\n      .json({ success: false, message: \"Missing params id\" });\n  }\n  try {\n    const posts = await PostModel.find({ user: req.userId });\n    const currentPost = posts.find((p) => p.id === postId);\n    if (!currentPost) {\n      return res\n        .status(400)\n        .json({ success: false, message: \"Post not found!\" });\n    }\n    const url = req.body.url;\n    const updatePost = {\n      title: req.body.title,\n      status: req.body.status || \"TO LEARN\",\n      description: req.body.description || \"\",\n      url: url?.startsWith(\"https://\") ? url : `https://${url}`,\n    };\n    const { error } = await PostValidation(updatePost);\n    if (error) {\n      return res.status(400).json({\n        success: false,\n        message: error.details[0].message,\n      });\n    }\n\n    //success\n    const updateCondition = { _id: req.params.id };\n    const updatePostModel = await PostModel.findOneAndUpdate(\n      updateCondition,\n      updatePost,\n      { new: true }\n    );\n\n    console.log(updatePostModel);\n    return res.status(200).json({\n      success: true,\n      message: \"Update post success!\",\n      data: updatePost,\n    });\n  } catch (error) {\n    console.log(error.message);\n    return res.status(403).json({\n      success: false,\n      message: \"server disconnected\",\n    });\n  }\n};\n\nconst deletePost = async (req, res) => {\n  const postId = req.params.id;\n  if (!postId) {\n    return res.status(400).json({\n      success: false,\n      message: \"Post not found!\",\n    });\n  }\n  try {\n    await PostModel.deleteOne({ _id: postId });\n\n    return res.status(200).json({\n      success: true,\n      message: \"Post deleted!\",\n    });\n  } catch (error) {\n    console.log(error.message);\n    return res.status(403).json({\n      success: false,\n      message: \"Server disconnected!\",\n    });\n  }\n};\n\nmodule.exports = {\n  createPost: createPost,\n  readPosts: readPosts,\n  updatePost: updatePost,\n  deletePost: deletePost,\n};\n"],"mappings":"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"}},"mtime":1657202757090},"{\"assumptions\":{},\"sourceRoot\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/models/TodoModel/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server\",\"filename\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/models/TodoModel/PostModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.6:development":{"value":{"code":"\"use strict\";\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Schema = _mongoose.default.Schema;\nconst PostSchema = new Schema({\n  title: {\n    type: String,\n    required: true\n  },\n  description: {\n    type: String\n  },\n  url: {\n    type: String\n  },\n  status: {\n    type: String,\n    erum: [\"TO LEARN\", \"LEARNING\", \"LEARNED\"]\n  },\n  user: {\n    type: Schema.Types.ObjectID,\n    ref: \"users\"\n  }\n});\nmodule.exports = _mongoose.default.model(\"posts\", PostSchema);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTY2hlbWEiLCJtb25nb29zZSIsIlBvc3RTY2hlbWEiLCJ0aXRsZSIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsImRlc2NyaXB0aW9uIiwidXJsIiwic3RhdHVzIiwiZXJ1bSIsInVzZXIiLCJUeXBlcyIsIk9iamVjdElEIiwicmVmIiwibW9kdWxlIiwiZXhwb3J0cyIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9iaW5oaHVuZXAvRGVza3RvcC9zb2Z0ZWNoL2JhdGNoMjFfTm9kZWpzL3NlcnZlci9zcmMvbW9kZWxzL1RvZG9Nb2RlbC8iLCJzb3VyY2VzIjpbIlBvc3RNb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XG5cbmNvbnN0IFNjaGVtYSA9IG1vbmdvb3NlLlNjaGVtYTtcbmNvbnN0IFBvc3RTY2hlbWEgPSBuZXcgU2NoZW1hKHtcbiAgdGl0bGU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gIH0sXG4gIGRlc2NyaXB0aW9uOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICB9LFxuICB1cmw6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gIH0sXG4gIHN0YXR1czoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICBlcnVtOiBbXCJUTyBMRUFSTlwiLCBcIkxFQVJOSU5HXCIsIFwiTEVBUk5FRFwiXSxcbiAgfSxcbiAgdXNlcjoge1xuICAgIHR5cGU6IFNjaGVtYS5UeXBlcy5PYmplY3RJRCxcbiAgICByZWY6IFwidXNlcnNcIixcbiAgfSxcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IG1vbmdvb3NlLm1vZGVsKFwicG9zdHNcIiwgUG9zdFNjaGVtYSk7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUdDLGlCQUFBLENBQVNELE1BQXhCO0FBQ0EsTUFBTUUsVUFBVSxHQUFHLElBQUlGLE1BQUosQ0FBVztFQUM1QkcsS0FBSyxFQUFFO0lBQ0xDLElBQUksRUFBRUMsTUFERDtJQUVMQyxRQUFRLEVBQUU7RUFGTCxDQURxQjtFQUs1QkMsV0FBVyxFQUFFO0lBQ1hILElBQUksRUFBRUM7RUFESyxDQUxlO0VBUTVCRyxHQUFHLEVBQUU7SUFDSEosSUFBSSxFQUFFQztFQURILENBUnVCO0VBVzVCSSxNQUFNLEVBQUU7SUFDTkwsSUFBSSxFQUFFQyxNQURBO0lBRU5LLElBQUksRUFBRSxDQUFDLFVBQUQsRUFBYSxVQUFiLEVBQXlCLFNBQXpCO0VBRkEsQ0FYb0I7RUFlNUJDLElBQUksRUFBRTtJQUNKUCxJQUFJLEVBQUVKLE1BQU0sQ0FBQ1ksS0FBUCxDQUFhQyxRQURmO0lBRUpDLEdBQUcsRUFBRTtFQUZEO0FBZnNCLENBQVgsQ0FBbkI7QUFxQkFDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQmYsaUJBQUEsQ0FBU2dCLEtBQVQsQ0FBZSxPQUFmLEVBQXdCZixVQUF4QixDQUFqQiJ9","map":{"version":3,"names":["Schema","mongoose","PostSchema","title","type","String","required","description","url","status","erum","user","Types","ObjectID","ref","module","exports","model"],"sourceRoot":"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/models/TodoModel/","sources":["PostModel.js"],"sourcesContent":["import mongoose from \"mongoose\";\n\nconst Schema = mongoose.Schema;\nconst PostSchema = new Schema({\n  title: {\n    type: String,\n    required: true,\n  },\n  description: {\n    type: String,\n  },\n  url: {\n    type: String,\n  },\n  status: {\n    type: String,\n    erum: [\"TO LEARN\", \"LEARNING\", \"LEARNED\"],\n  },\n  user: {\n    type: Schema.Types.ObjectID,\n    ref: \"users\",\n  },\n});\n\nmodule.exports = mongoose.model(\"posts\", PostSchema);\n"],"mappings":";;AAAA;;;;AAEA,MAAMA,MAAM,GAAGC,iBAAA,CAASD,MAAxB;AACA,MAAME,UAAU,GAAG,IAAIF,MAAJ,CAAW;EAC5BG,KAAK,EAAE;IACLC,IAAI,EAAEC,MADD;IAELC,QAAQ,EAAE;EAFL,CADqB;EAK5BC,WAAW,EAAE;IACXH,IAAI,EAAEC;EADK,CALe;EAQ5BG,GAAG,EAAE;IACHJ,IAAI,EAAEC;EADH,CARuB;EAW5BI,MAAM,EAAE;IACNL,IAAI,EAAEC,MADA;IAENK,IAAI,EAAE,CAAC,UAAD,EAAa,UAAb,EAAyB,SAAzB;EAFA,CAXoB;EAe5BC,IAAI,EAAE;IACJP,IAAI,EAAEJ,MAAM,CAACY,KAAP,CAAaC,QADf;IAEJC,GAAG,EAAE;EAFD;AAfsB,CAAX,CAAnB;AAqBAC,MAAM,CAACC,OAAP,GAAiBf,iBAAA,CAASgB,KAAT,CAAe,OAAf,EAAwBf,UAAxB,CAAjB"}},"mtime":1657214925475},"{\"assumptions\":{},\"sourceRoot\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/validation/TodoValidation/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server\",\"filename\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/validation/TodoValidation/PostValidation.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.6:development":{"value":{"code":"\"use strict\";\n\nvar _joi = _interopRequireDefault(require(\"joi\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst checkPost = post => {\n  const Schema = _joi.default.object({\n    title: _joi.default.string().min(10).max(50).required(),\n    description: _joi.default.string().min(10).max(500),\n    url: _joi.default.string(),\n    status: _joi.default.any().valid(\"TO LEARN\", \"LEARNING\", \"LEARNED\")\n  });\n\n  return Schema.validate(post);\n};\n\nmodule.exports = checkPost;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjaGVja1Bvc3QiLCJwb3N0IiwiU2NoZW1hIiwiSm9pIiwib2JqZWN0IiwidGl0bGUiLCJzdHJpbmciLCJtaW4iLCJtYXgiLCJyZXF1aXJlZCIsImRlc2NyaXB0aW9uIiwidXJsIiwic3RhdHVzIiwiYW55IiwidmFsaWQiLCJ2YWxpZGF0ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL2JpbmhodW5lcC9EZXNrdG9wL3NvZnRlY2gvYmF0Y2gyMV9Ob2RlanMvc2VydmVyL3NyYy92YWxpZGF0aW9uL1RvZG9WYWxpZGF0aW9uLyIsInNvdXJjZXMiOlsiUG9zdFZhbGlkYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEpvaSBmcm9tIFwiam9pXCI7XG5cbmNvbnN0IGNoZWNrUG9zdCA9IChwb3N0KSA9PiB7XG4gIGNvbnN0IFNjaGVtYSA9IEpvaS5vYmplY3Qoe1xuICAgIHRpdGxlOiBKb2kuc3RyaW5nKCkubWluKDEwKS5tYXgoNTApLnJlcXVpcmVkKCksXG4gICAgZGVzY3JpcHRpb246IEpvaS5zdHJpbmcoKS5taW4oMTApLm1heCg1MDApLFxuICAgIHVybDogSm9pLnN0cmluZygpLFxuICAgIHN0YXR1czogSm9pLmFueSgpLnZhbGlkKFwiVE8gTEVBUk5cIiwgXCJMRUFSTklOR1wiLCBcIkxFQVJORURcIiksXG4gIH0pO1xuICByZXR1cm4gU2NoZW1hLnZhbGlkYXRlKHBvc3QpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBjaGVja1Bvc3Q7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7QUFFQSxNQUFNQSxTQUFTLEdBQUlDLElBQUQsSUFBVTtFQUMxQixNQUFNQyxNQUFNLEdBQUdDLFlBQUEsQ0FBSUMsTUFBSixDQUFXO0lBQ3hCQyxLQUFLLEVBQUVGLFlBQUEsQ0FBSUcsTUFBSixHQUFhQyxHQUFiLENBQWlCLEVBQWpCLEVBQXFCQyxHQUFyQixDQUF5QixFQUF6QixFQUE2QkMsUUFBN0IsRUFEaUI7SUFFeEJDLFdBQVcsRUFBRVAsWUFBQSxDQUFJRyxNQUFKLEdBQWFDLEdBQWIsQ0FBaUIsRUFBakIsRUFBcUJDLEdBQXJCLENBQXlCLEdBQXpCLENBRlc7SUFHeEJHLEdBQUcsRUFBRVIsWUFBQSxDQUFJRyxNQUFKLEVBSG1CO0lBSXhCTSxNQUFNLEVBQUVULFlBQUEsQ0FBSVUsR0FBSixHQUFVQyxLQUFWLENBQWdCLFVBQWhCLEVBQTRCLFVBQTVCLEVBQXdDLFNBQXhDO0VBSmdCLENBQVgsQ0FBZjs7RUFNQSxPQUFPWixNQUFNLENBQUNhLFFBQVAsQ0FBZ0JkLElBQWhCLENBQVA7QUFDRCxDQVJEOztBQVVBZSxNQUFNLENBQUNDLE9BQVAsR0FBaUJqQixTQUFqQiJ9","map":{"version":3,"names":["checkPost","post","Schema","Joi","object","title","string","min","max","required","description","url","status","any","valid","validate","module","exports"],"sourceRoot":"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/validation/TodoValidation/","sources":["PostValidation.js"],"sourcesContent":["import Joi from \"joi\";\n\nconst checkPost = (post) => {\n  const Schema = Joi.object({\n    title: Joi.string().min(10).max(50).required(),\n    description: Joi.string().min(10).max(500),\n    url: Joi.string(),\n    status: Joi.any().valid(\"TO LEARN\", \"LEARNING\", \"LEARNED\"),\n  });\n  return Schema.validate(post);\n};\n\nmodule.exports = checkPost;\n"],"mappings":";;AAAA;;;;AAEA,MAAMA,SAAS,GAAIC,IAAD,IAAU;EAC1B,MAAMC,MAAM,GAAGC,YAAA,CAAIC,MAAJ,CAAW;IACxBC,KAAK,EAAEF,YAAA,CAAIG,MAAJ,GAAaC,GAAb,CAAiB,EAAjB,EAAqBC,GAArB,CAAyB,EAAzB,EAA6BC,QAA7B,EADiB;IAExBC,WAAW,EAAEP,YAAA,CAAIG,MAAJ,GAAaC,GAAb,CAAiB,EAAjB,EAAqBC,GAArB,CAAyB,GAAzB,CAFW;IAGxBG,GAAG,EAAER,YAAA,CAAIG,MAAJ,EAHmB;IAIxBM,MAAM,EAAET,YAAA,CAAIU,GAAJ,GAAUC,KAAV,CAAgB,UAAhB,EAA4B,UAA5B,EAAwC,SAAxC;EAJgB,CAAX,CAAf;;EAMA,OAAOZ,MAAM,CAACa,QAAP,CAAgBd,IAAhB,CAAP;AACD,CARD;;AAUAe,MAAM,CAACC,OAAP,GAAiBjB,SAAjB"}},"mtime":1656946484733},"{\"assumptions\":{},\"sourceRoot\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/middleware/Todo/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server\",\"filename\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/middleware/Todo/UserMiddleware.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.6:development":{"value":{"code":"\"use strict\";\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst verifyToken = (req, res, next) => {\n  const authHeader = req.header(\"Authorization\");\n  const token = authHeader && authHeader.split(\" \")[1];\n\n  if (!token) {\n    return res.status(401).json({\n      success: false,\n      message: \"Access token not found\"\n    });\n  }\n\n  try {\n    const decoded = _jsonwebtoken.default.verify(token, process.env.ACCESS_TOKEN_SECRET);\n\n    req.userId = decoded.userId;\n    next();\n  } catch (error) {\n    console.log(error.message);\n    return res.status(403).json({\n      success: false,\n      message: \"Invalid token\"\n    });\n  }\n};\n\nmodule.exports = verifyToken;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ2ZXJpZnlUb2tlbiIsInJlcSIsInJlcyIsIm5leHQiLCJhdXRoSGVhZGVyIiwiaGVhZGVyIiwidG9rZW4iLCJzcGxpdCIsInN0YXR1cyIsImpzb24iLCJzdWNjZXNzIiwibWVzc2FnZSIsImRlY29kZWQiLCJqd3QiLCJ2ZXJpZnkiLCJwcm9jZXNzIiwiZW52IiwiQUNDRVNTX1RPS0VOX1NFQ1JFVCIsInVzZXJJZCIsImVycm9yIiwiY29uc29sZSIsImxvZyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL2JpbmhodW5lcC9EZXNrdG9wL3NvZnRlY2gvYmF0Y2gyMV9Ob2RlanMvc2VydmVyL3NyYy9taWRkbGV3YXJlL1RvZG8vIiwic291cmNlcyI6WyJVc2VyTWlkZGxld2FyZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcblxuY29uc3QgdmVyaWZ5VG9rZW4gPSAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3QgYXV0aEhlYWRlciA9IHJlcS5oZWFkZXIoXCJBdXRob3JpemF0aW9uXCIpO1xuICBjb25zdCB0b2tlbiA9IGF1dGhIZWFkZXIgJiYgYXV0aEhlYWRlci5zcGxpdChcIiBcIilbMV07XG4gIGlmICghdG9rZW4pIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBtZXNzYWdlOiBcIkFjY2VzcyB0b2tlbiBub3QgZm91bmRcIixcbiAgICB9KTtcbiAgfVxuICB0cnkge1xuICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5BQ0NFU1NfVE9LRU5fU0VDUkVUKTtcbiAgICByZXEudXNlcklkID0gZGVjb2RlZC51c2VySWQ7XG4gICAgbmV4dCgpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIkludmFsaWQgdG9rZW5cIiB9KTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB2ZXJpZnlUb2tlbjtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7OztBQUVBLE1BQU1BLFdBQVcsR0FBRyxDQUFDQyxHQUFELEVBQU1DLEdBQU4sRUFBV0MsSUFBWCxLQUFvQjtFQUN0QyxNQUFNQyxVQUFVLEdBQUdILEdBQUcsQ0FBQ0ksTUFBSixDQUFXLGVBQVgsQ0FBbkI7RUFDQSxNQUFNQyxLQUFLLEdBQUdGLFVBQVUsSUFBSUEsVUFBVSxDQUFDRyxLQUFYLENBQWlCLEdBQWpCLEVBQXNCLENBQXRCLENBQTVCOztFQUNBLElBQUksQ0FBQ0QsS0FBTCxFQUFZO0lBQ1YsT0FBT0osR0FBRyxDQUFDTSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7TUFDMUJDLE9BQU8sRUFBRSxLQURpQjtNQUUxQkMsT0FBTyxFQUFFO0lBRmlCLENBQXJCLENBQVA7RUFJRDs7RUFDRCxJQUFJO0lBQ0YsTUFBTUMsT0FBTyxHQUFHQyxxQkFBQSxDQUFJQyxNQUFKLENBQVdSLEtBQVgsRUFBa0JTLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxtQkFBOUIsQ0FBaEI7O0lBQ0FoQixHQUFHLENBQUNpQixNQUFKLEdBQWFOLE9BQU8sQ0FBQ00sTUFBckI7SUFDQWYsSUFBSTtFQUNMLENBSkQsQ0FJRSxPQUFPZ0IsS0FBUCxFQUFjO0lBQ2RDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRixLQUFLLENBQUNSLE9BQWxCO0lBQ0EsT0FBT1QsR0FBRyxDQUFDTSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7TUFBRUMsT0FBTyxFQUFFLEtBQVg7TUFBa0JDLE9BQU8sRUFBRTtJQUEzQixDQUFyQixDQUFQO0VBQ0Q7QUFDRixDQWpCRDs7QUFtQkFXLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQnZCLFdBQWpCIn0=","map":{"version":3,"names":["verifyToken","req","res","next","authHeader","header","token","split","status","json","success","message","decoded","jwt","verify","process","env","ACCESS_TOKEN_SECRET","userId","error","console","log","module","exports"],"sourceRoot":"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/middleware/Todo/","sources":["UserMiddleware.js"],"sourcesContent":["import jwt from \"jsonwebtoken\";\n\nconst verifyToken = (req, res, next) => {\n  const authHeader = req.header(\"Authorization\");\n  const token = authHeader && authHeader.split(\" \")[1];\n  if (!token) {\n    return res.status(401).json({\n      success: false,\n      message: \"Access token not found\",\n    });\n  }\n  try {\n    const decoded = jwt.verify(token, process.env.ACCESS_TOKEN_SECRET);\n    req.userId = decoded.userId;\n    next();\n  } catch (error) {\n    console.log(error.message);\n    return res.status(403).json({ success: false, message: \"Invalid token\" });\n  }\n};\n\nmodule.exports = verifyToken;\n"],"mappings":";;AAAA;;;;AAEA,MAAMA,WAAW,GAAG,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;EACtC,MAAMC,UAAU,GAAGH,GAAG,CAACI,MAAJ,CAAW,eAAX,CAAnB;EACA,MAAMC,KAAK,GAAGF,UAAU,IAAIA,UAAU,CAACG,KAAX,CAAiB,GAAjB,EAAsB,CAAtB,CAA5B;;EACA,IAAI,CAACD,KAAL,EAAY;IACV,OAAOJ,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;MAC1BC,OAAO,EAAE,KADiB;MAE1BC,OAAO,EAAE;IAFiB,CAArB,CAAP;EAID;;EACD,IAAI;IACF,MAAMC,OAAO,GAAGC,qBAAA,CAAIC,MAAJ,CAAWR,KAAX,EAAkBS,OAAO,CAACC,GAAR,CAAYC,mBAA9B,CAAhB;;IACAhB,GAAG,CAACiB,MAAJ,GAAaN,OAAO,CAACM,MAArB;IACAf,IAAI;EACL,CAJD,CAIE,OAAOgB,KAAP,EAAc;IACdC,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACR,OAAlB;IACA,OAAOT,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;MAAEC,OAAO,EAAE,KAAX;MAAkBC,OAAO,EAAE;IAA3B,CAArB,CAAP;EACD;AACF,CAjBD;;AAmBAW,MAAM,CAACC,OAAP,GAAiBvB,WAAjB"}},"mtime":1656944099017},"{\"assumptions\":{},\"sourceRoot\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/router/TodoRouter/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server\",\"filename\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/router/TodoRouter/UserRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/binhhunep/Desktop/softech/batch21_Nodejs/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.6:development":{"value":{"code":"\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _UserController = _interopRequireDefault(require(\"../../controllers/TodoController/UserController\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Router = _express.default.Router();\n\nconst usersRouter = app => {\n  Router.get(\"/\", _UserController.default.getUsers);\n  Router.post(\"/register\", _UserController.default.registerUser);\n  Router.post(\"/login\", _UserController.default.checkLogin);\n  return app.use(\"/api/Todo/User\", Router);\n};\n\nmodule.exports = usersRouter;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSb3V0ZXIiLCJleHByZXNzIiwidXNlcnNSb3V0ZXIiLCJhcHAiLCJnZXQiLCJVc2VyQ29udHJvbGxlciIsImdldFVzZXJzIiwicG9zdCIsInJlZ2lzdGVyVXNlciIsImNoZWNrTG9naW4iLCJ1c2UiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9iaW5oaHVuZXAvRGVza3RvcC9zb2Z0ZWNoL2JhdGNoMjFfTm9kZWpzL3NlcnZlci9zcmMvcm91dGVyL1RvZG9Sb3V0ZXIvIiwic291cmNlcyI6WyJVc2VyUm91dGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgVXNlckNvbnRyb2xsZXIgZnJvbSBcIi4uLy4uL2NvbnRyb2xsZXJzL1RvZG9Db250cm9sbGVyL1VzZXJDb250cm9sbGVyXCI7XG5jb25zdCBSb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG5jb25zdCB1c2Vyc1JvdXRlciA9IChhcHApID0+IHtcbiAgUm91dGVyLmdldChcIi9cIiwgVXNlckNvbnRyb2xsZXIuZ2V0VXNlcnMpO1xuICBSb3V0ZXIucG9zdChcIi9yZWdpc3RlclwiLCBVc2VyQ29udHJvbGxlci5yZWdpc3RlclVzZXIpO1xuICBSb3V0ZXIucG9zdChcIi9sb2dpblwiLCBVc2VyQ29udHJvbGxlci5jaGVja0xvZ2luKTtcblxuICByZXR1cm4gYXBwLnVzZShcIi9hcGkvVG9kby9Vc2VyXCIsIFJvdXRlcik7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHVzZXJzUm91dGVyO1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOzs7O0FBQ0EsTUFBTUEsTUFBTSxHQUFHQyxnQkFBQSxDQUFRRCxNQUFSLEVBQWY7O0FBRUEsTUFBTUUsV0FBVyxHQUFJQyxHQUFELElBQVM7RUFDM0JILE1BQU0sQ0FBQ0ksR0FBUCxDQUFXLEdBQVgsRUFBZ0JDLHVCQUFBLENBQWVDLFFBQS9CO0VBQ0FOLE1BQU0sQ0FBQ08sSUFBUCxDQUFZLFdBQVosRUFBeUJGLHVCQUFBLENBQWVHLFlBQXhDO0VBQ0FSLE1BQU0sQ0FBQ08sSUFBUCxDQUFZLFFBQVosRUFBc0JGLHVCQUFBLENBQWVJLFVBQXJDO0VBRUEsT0FBT04sR0FBRyxDQUFDTyxHQUFKLENBQVEsZ0JBQVIsRUFBMEJWLE1BQTFCLENBQVA7QUFDRCxDQU5EOztBQVFBVyxNQUFNLENBQUNDLE9BQVAsR0FBaUJWLFdBQWpCIn0=","map":{"version":3,"names":["Router","express","usersRouter","app","get","UserController","getUsers","post","registerUser","checkLogin","use","module","exports"],"sourceRoot":"/home/binhhunep/Desktop/softech/batch21_Nodejs/server/src/router/TodoRouter/","sources":["UserRouter.js"],"sourcesContent":["import express from \"express\";\nimport UserController from \"../../controllers/TodoController/UserController\";\nconst Router = express.Router();\n\nconst usersRouter = (app) => {\n  Router.get(\"/\", UserController.getUsers);\n  Router.post(\"/register\", UserController.registerUser);\n  Router.post(\"/login\", UserController.checkLogin);\n\n  return app.use(\"/api/Todo/User\", Router);\n};\n\nmodule.exports = usersRouter;\n"],"mappings":";;AAAA;;AACA;;;;AACA,MAAMA,MAAM,GAAGC,gBAAA,CAAQD,MAAR,EAAf;;AAEA,MAAME,WAAW,GAAIC,GAAD,IAAS;EAC3BH,MAAM,CAACI,GAAP,CAAW,GAAX,EAAgBC,uBAAA,CAAeC,QAA/B;EACAN,MAAM,CAACO,IAAP,CAAY,WAAZ,EAAyBF,uBAAA,CAAeG,YAAxC;EACAR,MAAM,CAACO,IAAP,CAAY,QAAZ,EAAsBF,uBAAA,CAAeI,UAArC;EAEA,OAAON,GAAG,CAACO,GAAJ,CAAQ,gBAAR,EAA0BV,MAA1B,CAAP;AACD,CAND;;AAQAW,MAAM,CAACC,OAAP,GAAiBV,WAAjB"}},"mtime":1656937315744}}